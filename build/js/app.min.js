/*
 * Earthbound.js
 * An Earthbound Demo in Javascipt
 *
 * @author Cary Stanley
 * @version 0.0.1
 * @copyright Cary Stanley
 * @license  licensed
 *
 * Made using Phaser JS Boilerplate <https://github.com/lukewilde/phaser-js-boilerplate>
 */
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=a("./properties"),e={boot:a("./states/boot.js"),preloader:a("./states/preloader.js"),game:a("./states/game.js")},f=new Phaser.Game(d.size.x,d.size.y,Phaser.AUTO,"game",null,!1,!1);a("slopes"),Object.keys(e).forEach(function(a){var b=e[a];f.state.add(a,b)}),f.state.start("boot")},{"./properties":12,"./states/boot.js":13,"./states/game.js":14,"./states/preloader.js":15,slopes:19}],2:[function(a,b,c){DialogComponent=function(a){this.container=a.add.image(96,8,"chat_dialog"),this.container.fixedToCamera=!0,this.chatTxt=a.make.bitmapText(8,8,"basic","",16,this.container),this.chatTxt.maxWidth=144,this.container.addChild(this.chatTxt),this.container.visible=!1,this.buffer="",this.displayText="",a.time.events.loop(25,this.update,this)},DialogComponent.prototype.update=function(){this.buffer.length>0&&(this.displayText+=this.buffer.substr(0,1),this.buffer=this.buffer.substr(1),this.chatTxt.setText(this.displayText))},DialogComponent.prototype.setText=function(a){this.buffer=a},DialogComponent.prototype.show=function(){this.container.visible=!0},DialogComponent.prototype.hide=function(){this.container.visible=!1,this.clear()},DialogComponent.prototype.clear=function(){this.buffer="",this.displayText="",this.chatTxt.setText(this.displayText)},b.exports=DialogComponent},{}],3:[function(a,b,c){MatteComponent=function(a){var b=a.add.graphics(0,0);b.fixedToCamera=!0,b.beginFill(0,1),b.drawRect(0,0,a.width,a.height),b.alpha=1,b.endFill(),this.matte=b,this.game=a},MatteComponent.prototype.fadeTween=function(a,b){b=b||function(){},s=this.game.add.tween(this.matte),s.to({alpha:a},500,null),s.onComplete.add(b),s.start()},MatteComponent.prototype.fadeIn=function(a){this.fadeTween(0,a)},MatteComponent.prototype.fadeOut=function(a){this.fadeTween(1,a)},b.exports=MatteComponent},{}],4:[function(a,b,c){function d(a,b,c,d,e){var f=8*d;Phaser.Sprite.call(this,a,b,c,"actors"),this.animations.add("up",[f+0,f+1],5,!0),this.animations.add("right",[f+2,f+3],10,!0),this.animations.add("down",[f+4,f+5],5,!0),this.animations.add("left",[f+6,f+7],10,!0),this.anchor.setTo(.5,1),e&&(a.physics.arcade.enable(this),this.body.setSize(14,7,5,27),a.slopes.enable(this))}d.prototype=Object.create(Phaser.Sprite.prototype),d.prototype.constructor=d,b.exports=d},{}],5:[function(a,b,c){function d(a,b,c){Character.call(this,a,c.x,c.y,b,!1),this.initQueue(c,16)}Character=a("./Character"),d.prototype=Object.create(Character.prototype),d.prototype.constructor=d,d.prototype.initQueue=function(a,b){this.followCharacter=a,this.followQueue=[],this.leaderCursor=0,this.followerCursor=1,this.followMax=b;for(var c=0;b>c;c++)this.followQueue[c]={animation:"down",x:a.x,y:a.y}},d.prototype.updateQueue=function(){this.leaderCursor=(this.leaderCursor+1)%this.followMax,this.followerCursor=(this.followerCursor+1)%this.followMax,this.followQueue[this.leaderCursor].animation=this.followCharacter.animations.currentAnim.name,this.followQueue[this.leaderCursor].x=this.followCharacter.x,this.followQueue[this.leaderCursor].y=this.followCharacter.y;var a=this.followQueue[this.followerCursor];this.x=a.x,this.y=a.y,this.play(a.animation)},d.prototype.update=function(){return this.game.state.getCurrentState().playerDisabled?void this.animations.stop():void(this.followCharacter.animations.currentAnim.isPlaying?this.updateQueue():this.animations.stop())},b.exports=d},{"./Character":4}],6:[function(a,b,c){function d(a,b,c,d,e){Character.call(this,a,c,d,e,!0),this.map=b,this.accel=80}Character=a("./Character"),d.prototype=Object.create(Character.prototype),d.prototype.constructor=d,d.prototype.update=function(){if(this.body.velocity.x=0,this.body.velocity.y=0,this.game.state.getCurrentState().playerDisabled)return void this.animations.stop();var a=null,b=this.game.state.getCurrentState().cursors;b.left.isDown?(this.body.velocity.x=-this.accel,a="left"):b.right.isDown&&(this.body.velocity.x=this.accel,a="right"),b.up.isDown?(this.body.velocity.y=-this.accel,a="up"):b.down.isDown&&(this.body.velocity.y=this.accel,a="down"),a?this.play(a):this.animations.stop()},b.exports=d},{"./Character":4}],7:[function(a,b,c){function d(a,b){e.call(this,a,b)}var e=a("./Event");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.onTouch=function(){var a=this.settings.properties;this.game.showDialog(a.text)},b.exports=d},{"./Event":8}],8:[function(a,b,c){function d(a,b){this.game=a,this.settings=b,Phaser.Sprite.call(this,a,b.x||0,b.y||0),this.renderable=!1,this.width=b.width||16,this.height=b.height||16,a.physics.arcade.enable(this),this.body.immovable=!0}d.prototype=Object.create(Phaser.Sprite.prototype),d.prototype.constructor=d,d.prototype.onTouch=function(){},b.exports=d},{}],9:[function(a,b,c){function d(a,b){e.call(this,a,b)}var e=a("./Event");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.onTouch=function(){var a=this.settings.properties;this.game.transport(a.map,a.location)},b.exports=d},{"./Event":8}],10:[function(a,b,c){function d(a,b){this.game=a,this.config=b,this.map=a.add.tilemap(b.id),Object.keys(b.tilesets).forEach(function(a){this.map.addTilesetImage(a,a)},this),a.world.setBounds(0,0,this.map.widthInPixels,this.map.heightInPixels),this.backgroundLayer=this.map.createLayer("background"),this.foregroundLayer=this.map.createLayer("foreground"),this.locations=this.setupLocations(this.map),this.events=this.setupEvents(this.game,this.map);for(var c={291:null,158:"HALF_TOP_RIGHT",159:"HALF_TOP_LEFT",97:null,80:"HALF_TOP_RIGHT",81:"HALF_TOP_LEFT",82:"HALF_TOP_LEFT"},d=[],e=0;291>=e;e++)d.push(null!==c[e]?c[e]||"FULL":void 0);this.game.game.slopes.convertTilemapLayer(this.backgroundLayer,d)}var e={transport:a("../events/TransportEvent"),dialog:a("../events/DialogEvent")};d.prototype.getEvents=function(){return this.events},d.prototype.setupEvents=function(a,b){return events=[],b.objects.Events.forEach(function(b){events.push(new e[b.type](a,b))}),events},d.prototype.setupLocations=function(a){var b={};return a.objects.Locations.forEach(function(a){b[a.name]={x:a.x+a.width/2,y:a.y+a.height/2}}),b},d.prototype.getLocation=function(a){return this.locations[a]},d.prototype.getConfig=function(){return this.config},b.exports=d},{"../events/DialogEvent":7,"../events/TransportEvent":9}],11:[function(a,b,c){b.exports={house:{id:"house",tilemap:"maps/house.json",tilesets:{house_tileset:"images/house_tileset.png"}}}},{}],12:[function(a,b,c){var d=a("../../package.json");b.exports={title:"Earthbound.js",description:d.description,port:3017,liveReloadPort:3018,mute:!1,showStats:!0,size:{x:256,y:224},analyticsId:"UA-5075951-7"}},{"../../package.json":21}],13:[function(a,b,c){function d(a){var b=new e;b.setMode(0),b.domElement.style.position="absolute",b.domElement.style.right="0px",b.domElement.style.top="0px",document.body.appendChild(b.domElement);var c=a.update;a.update=function(){b.begin(),c.apply(a,arguments),b.end()}}var e=a("Stats"),f=a("../properties"),g={};g.create=function(){f.showStats&&d(this.game),this.game.sound.mute=f.mute,this.game.state.start("preloader")},b.exports=g},{"../properties":12,Stats:20}],14:[function(a,b,c){var d=a("../entities/Follower"),e=a("../entities/Player"),f=a("../map/MapConfig"),g=a("../map/Map"),h={World:a("../substates/World"),Transition:a("../substates/Transition"),Dialog:a("../substates/Dialog")},i=a("../components/DialogComponent"),j=a("../components/MatteComponent"),k={};k.SubState=h,k.init=function(a,b){this.mapConfig=f[a],this.startLocationId=b},k.preload=function(){var a=this.mapConfig;k.load.tilemap(a.id,a.tilemap,null,Phaser.Tilemap.TILED_JSON),Object.keys(a.tilesets).forEach(function(b){k.load.image(b,a.tilesets[b])}),k.load.image("chat_dialog","images/chat_dialog.png"),k.load.bitmapFont("basic","fonts/basic.png","fonts/basic.xml"),k.load.bitmapFont("mrsaturn","fonts/mrsaturn.png","fonts/mrsaturn.xml"),k.load.audio("background_boymeetsgirl",["audio/background_boymeetsgirl.mp3"]),k.load.audio("effect_door_open",["audio/effect_door_open.wav"]),k.load.spritesheet("actors","images/actors.png",24,32)};var l,m;k.create=function(){this.physics.startSystem(Phaser.Physics.ARCADE),this.game.plugins.add(Phaser.Plugin.ArcadeSlopes),k.physics.arcade.gravity.y=0,this.backgroundMusic=k.add.audio("background_boymeetsgirl"),this.soundEffects={effect_door_open:k.add.audio("effect_door_open")},this.backgroundMusic.play("",0,1,!0),this.currentMap=new g(k,this.mapConfig),this.characters=k.add.group();var a=this.currentMap.getLocation(this.startLocationId);this.player=new e(k.game,this.currentMap,a.x,a.y,0),l=new d(k.game,1,this.player),m=new d(k.game,2,l),this.characters.add(this.player),this.characters.add(l),this.characters.add(m),this.matte=new j(k.game),this.chatDialog=new i(k.game),this.switchSubState(h.World),this.cursors=k.input.keyboard.createCursorKeys(),this.spaceKey=k.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),this.game.input.keyboard.addKeyCapture([Phaser.Keyboard.SPACEBAR]),this.matte.fadeIn()},k.update=function(){this.substate&&this.substate.update&&this.substate.update.call(this)},k.switchSubState=function(a){this.substate&&this.substate.exit&&this.substate.exit.call(this),this.substate=a,this.substate&&this.substate.enter&&this.substate.enter.call(this)},k.fadeIn=function(a){this.matte.fadeIn(a)},k.fadeOut=function(a){this.matte.fadeOut(a)},k.soundEffectPlay=function(a){this.soundEffects[a].play()},k.transport=function(a,b){var c=this;this.switchSubState(h.Transition),this.soundEffectPlay("effect_door_open"),this.fadeOut(function(){if(c.mapConfig.id===a){var d=c.currentMap.getLocation(b);c.player.reset(d.x,d.y),c.fadeIn(function(){c.switchSubState(h.World)})}else c.backgroundMusic.stop(),c.state.start("game",!0,!1,a,b)})},k.showDialog=function(a){this.chatDialog.setText(a),this.switchSubState(h.Dialog)},b.exports=k},{"../components/DialogComponent":2,"../components/MatteComponent":3,"../entities/Follower":5,"../entities/Player":6,"../map/Map":10,"../map/MapConfig":11,"../substates/Dialog":16,"../substates/Transition":17,"../substates/World":18}],15:[function(a,b,c){var d={};d.preload=function(){},d.create=function(){this.game.state.start("game",!0,!1,"house","start")},b.exports=d},{}],16:[function(a,b,c){var d={enter:function(){this.playerDisabled=!0,this.chatDialog.show()},update:function(){this.spaceKey.isDown&&this.switchSubState(this.SubState.World)},exit:function(){this.chatDialog.hide()}};b.exports=d},{}],17:[function(a,b,c){var d={enter:function(){this.playerDisabled=!0},update:function(){},exit:function(){}};b.exports=d},{}],18:[function(a,b,c){var d={enter:function(){this.playerDisabled=!1,this.game.camera.follow(this.player,Phaser.Camera.FOLLOW_TOPDOWN)},update:function(){if(this.characters.sort("y",Phaser.Group.SORT_ASCENDING),!this.playerDisabled){var a=this.currentMap.getEvents();this.physics.arcade.collide(this.player,this.currentMap.backgroundLayer),this.physics.arcade.collide(this.player,a,function(a,b){b.onTouch()})}},exit:function(){}};b.exports=d},{}],19:[function(a,b,c){(function(a){(function(a,b,c,d,e){Phaser.Plugin.ArcadeSlopes=function(a,b,c){Phaser.Plugin.call(this,a,b),this.defaultSolver=c||Phaser.Plugin.ArcadeSlopes.SAT,this.factory=new Phaser.Plugin.ArcadeSlopes.TileSlopeFactory,this.solvers={},this.solvers[Phaser.Plugin.ArcadeSlopes.SAT]=new Phaser.Plugin.ArcadeSlopes.SatSolver},Phaser.Plugin.ArcadeSlopes.prototype=Object.create(Phaser.Plugin.prototype),Phaser.Plugin.ArcadeSlopes.prototype.constructor=Phaser.Plugin.ArcadeSlopes,Phaser.Plugin.ArcadeSlopes.VERSION="0.1.0-beta",Phaser.Plugin.ArcadeSlopes.SAT="sat",Phaser.Plugin.ArcadeSlopes.METROID="metroid",Phaser.Plugin.ArcadeSlopes.prototype.init=function(){this.game.slopes=this.game.slopes||this,this.originalCollideSpriteVsTilemapLayer=Phaser.Physics.Arcade.prototype.collideSpriteVsTilemapLayer,Phaser.Physics.Arcade.prototype.collideSpriteVsTile=Phaser.Plugin.ArcadeSlopes.Overrides.collideSpriteVsTile,Phaser.Physics.Arcade.prototype.collideSpriteVsTiles=Phaser.Plugin.ArcadeSlopes.Overrides.collideSpriteVsTiles,Phaser.Physics.Arcade.prototype.collideSpriteVsTilemapLayer=Phaser.Plugin.ArcadeSlopes.Overrides.collideSpriteVsTilemapLayer,Phaser.Tilemap.prototype.getTileTopLeft=Phaser.Plugin.ArcadeSlopes.Overrides.getTileTopLeft,Phaser.Tilemap.prototype.getTileTopRight=Phaser.Plugin.ArcadeSlopes.Overrides.getTileTopRight,Phaser.Tilemap.prototype.getTileBottomLeft=Phaser.Plugin.ArcadeSlopes.Overrides.getTileBottomLeft,Phaser.Tilemap.prototype.getTileBottomRight=Phaser.Plugin.ArcadeSlopes.Overrides.getTileBottomRight},Phaser.Plugin.ArcadeSlopes.prototype.destroy=function(){this.game.slopes=null,Phaser.Physics.Arcade.prototype.collideSpriteVsTile=null,Phaser.Physics.Arcade.prototype.collideSpriteVsTiles=null,Phaser.Physics.Arcade.prototype.collideSpriteVsTilemapLayer=this.originalCollideSpriteVsTilemapLayer,Phaser.Tilemap.prototype.getTileTopLeft=null,Phaser.Tilemap.prototype.getTileTopRight=null,Phaser.Tilemap.prototype.getTileBottomLeft=null,Phaser.Tilemap.prototype.getTileBottomRight=null,Phaser.Plugin.prototype.destroy.call(this)},Phaser.Plugin.ArcadeSlopes.prototype.enable=function(a){if(Array.isArray(a))for(var b=0;b<a.length;b++)this.enable(a[b]);else a instanceof Phaser.Group?this.enable(a.children):(a.hasOwnProperty("body")&&this.enableBody(a.body),a.hasOwnProperty("children")&&a.children.length>0&&this.enable(a.children))},Phaser.Plugin.ArcadeSlopes.prototype.enableBody=function(a){a.polygon=new SAT.Box(new SAT.Vector(a.x,a.y),a.width,a.height).toPolygon(),a.slopes={friction:new Phaser.Point,preferY:!1,pullUp:0,pullDown:0,pullLeft:0,pullRight:0,sat:{response:null},skipFriction:!1,snapUp:0,snapDown:0,snapLeft:0,snapRight:0,velocity:new SAT.Vector}},Phaser.Plugin.ArcadeSlopes.prototype.convertTilemap=function(a,b,c){return this.factory.convertTilemap(a,b,c)},Phaser.Plugin.ArcadeSlopes.prototype.convertTilemapLayer=function(a,b){return this.factory.convertTilemapLayer(a,b)},Phaser.Plugin.ArcadeSlopes.prototype.collide=function(a,b,c,d){return c.slope.solver&&this.solvers.hasOwnProperty(c.slope.solver)?this.solvers[c.slope.solver].collide(a,b,c,d):this.solvers[this.defaultSolver].collide(a,b,c,d)},Phaser.Plugin.ArcadeSlopes.Facade=function(a){this.factory=a},Phaser.Plugin.ArcadeSlopes.Overrides={},Phaser.Plugin.ArcadeSlopes.Overrides.collideSpriteVsTile=function(a,b,c,d,e,f,g){if(!b.body)return!1;if(c.hasOwnProperty("slope")){if(this.game.slopes.collide(a,b.body,c,g))return this._total++,d&&d.call(f,b,c),!0}else if(this.separateTile(a,b.body,c,g))return this._total++,d&&d.call(f,b,c),!0;return!1},Phaser.Plugin.ArcadeSlopes.Overrides.collideSpriteVsTiles=function(a,b,c,d,e,f){var g=!1;if(!a.body)return g;for(var h=0;h<b.length;h++)d?d.call(e,a,b[h])&&(g=this.collideSpriteVsTile(h,a,b[h],c,d,e,f)||g):g=this.collideSpriteVsTile(h,a,b[h],c,d,e,f)||g;return g},Phaser.Plugin.ArcadeSlopes.Overrides.collideSpriteVsTilemapLayer=function(a,b,c,d,e,f){if(!a.body)return!1;var g=b.getTiles(a.body.position.x-a.body.tilePadding.x,a.body.position.y-a.body.tilePadding.y,a.body.width+a.body.tilePadding.x,a.body.height+a.body.tilePadding.y,!1,!1);if(0===g.length)return!1;var h=this.collideSpriteVsTiles(a,g,c,d,e,f);return h||f||this.game.slopes.solvers.sat.snap(a.body,g),h},Phaser.Plugin.ArcadeSlopes.Overrides.getTileTopLeft=function(a,b,c){return b>0&&c>0?this.layers[a].data[c-1][b-1]:null},Phaser.Plugin.ArcadeSlopes.Overrides.getTileTopRight=function(a,b,c){return b<this.layers[a].width-1&&c>0?this.layers[a].data[c-1][b+1]:null},Phaser.Plugin.ArcadeSlopes.Overrides.getTileBottomLeft=function(a,b,c){return b>0&&c<this.layers[a].height-1?this.layers[a].data[c+1][b-1]:null},Phaser.Plugin.ArcadeSlopes.Overrides.getTileBottomRight=function(a,b,c){return b<this.layers[a].width-1&&c<this.layers[a].height-1?this.layers[a].data[c+1][b+1]:null},Phaser.Plugin.ArcadeSlopes.SatRestrainer=function(){this.restraints={},this.setDefaultRestraints()},Phaser.Plugin.ArcadeSlopes.SatRestrainer.prototype.restrain=function(a,b,c,d){if(!d.overlap||!c.neighbours||!this.restraints.hasOwnProperty(c.slope.type))return!0;for(var e in this.restraints[c.slope.type]){var f=this.restraints[c.slope.type][e],g=c.neighbours[f.neighbour];if(g&&g.slope){var h=!1;if(h=f.types?f.types.indexOf(g.slope.type)>-1:g.slope.type===c.slope.type,f.hasOwnProperty("overlapX")&&(h="number"==typeof f.overlapX?h&&d.overlapN.x===f.overlapX:h&&d.overlapN.x>=f.overlapX[0]&&d.overlapN.x<=f.overlapX[1]),f.hasOwnProperty("overlapY")&&(h="number"==typeof f.overlapY?h&&d.overlapN.y===f.overlapY:h&&d.overlapN.y>=f.overlapY[0]&&d.overlapN.y<=f.overlapY[1]),h){var i=f.separate;return"function"==typeof i&&(i=i.call(this,b,c,d)),i&&c.slope.axis&&a.collideOnAxis(b,c,c.slope.axis),!1}}}return!0},Phaser.Plugin.ArcadeSlopes.SatRestrainer.resolveOverlaps=function(a){switch(a){case"up":return{overlapX:0,overlapY:[-1,0]};case"down":return{overlapX:0,overlapY:[0,1]};case"left":return{overlapX:[-1,0],overlapY:0};case"right":return{overlapX:[0,1],overlapY:0}}return console.warn("Unknown overlap direction '"+a+"'"),{}},Phaser.Plugin.ArcadeSlopes.SatRestrainer.prepareRestraints=function(a){var b={};for(var c in a){var d=a[c];for(var e in d){var f=d[e];if(f.direction){var g=Phaser.Plugin.ArcadeSlopes.SatRestrainer.resolveOverlaps(f.direction);f.overlapX=g.overlapX,f.overlapY=g.overlapY}for(var h in f.types)f.types[h]=Phaser.Plugin.ArcadeSlopes.TileSlope.resolveType(f.types[h]);f.separate!==!1&&"function"!=typeof f.separate&&(f.separate=!0)}var i=Phaser.Plugin.ArcadeSlopes.TileSlope.resolveType(c);b[i]=d}return b},Phaser.Plugin.ArcadeSlopes.SatRestrainer.prototype.setDefaultRestraints=function(){var a={};a.HALF_TOP=[{direction:"left",neighbour:"left",types:this.resolve("topRight","right"),separate:!1},{direction:"right",neighbour:"right",types:this.resolve("topLeft","left"),separate:!1}],a.HALF_BOTTOM=[{direction:"left",neighbour:"left",types:this.resolve("right","bottomRight"),separate:!1},{direction:"right",neighbour:"right",types:this.resolve("left","bottomLeft"),separate:!1}],a.HALF_LEFT=[{direction:"up",neighbour:"above",types:this.resolve("bottomLeft","bottom"),separate:!1},{direction:"down",neighbour:"below",types:this.resolve("topLeft","top"),separate:!1}],a.HALF_RIGHT=[{direction:"up",neighbour:"above",types:this.resolve("bottom","bottomRight"),separate:!1},{direction:"down",neighbour:"below",types:this.resolve("top","topRight"),separate:!1}],a.HALF_BOTTOM_LEFT=[{direction:"right",neighbour:"bottomRight",types:this.resolve("topLeft")},{direction:"up",neighbour:"topLeft",types:this.resolve("bottomRight")}],a.HALF_BOTTOM_RIGHT=[{direction:"left",neighbour:"bottomLeft",types:this.resolve("topRight")},{direction:"up",neighbour:"topRight",types:this.resolve("bottomLeft")}],a.HALF_TOP_LEFT=[{direction:"right",neighbour:"topRight",types:this.resolve("bottomLeft")},{direction:"down",neighbour:"bottomLeft",types:this.resolve("topRight")}],a.HALF_TOP_RIGHT=[{direction:"left",neighbour:"topLeft",types:this.resolve("bottomRight")},{direction:"down",neighbour:"bottomRight",types:this.resolve("topLeft")}],a.QUARTER_BOTTOM_LEFT_LOW=[{direction:"right",neighbour:"bottomRight",types:this.resolve("topLeft")},{direction:"up",neighbour:"left",types:this.resolve("topLeft","right","bottomRight")},{direction:"left",neighbour:"left",types:this.resolve("right","bottomRight"),separate:!1}],a.QUARTER_BOTTOM_LEFT_HIGH=[{direction:"right",neighbour:"right",types:this.resolve("left","bottomLeft"),separate:function(a,b){return a.bottom<b.bottom}},{direction:"up",neighbour:"topLeft",types:this.resolve("bottomRight")}],a.QUARTER_BOTTOM_RIGHT_LOW=[{direction:"left",neighbour:"bottomLeft",types:this.resolve("topRight")},{direction:"up",neighbour:"right",types:this.resolve("topRight","left","bottomLeft")},{direction:"right",neighbour:"right",types:this.resolve("left","bottomLeft"),separate:!1}],a.QUARTER_BOTTOM_RIGHT_HIGH=[{direction:"left",neighbour:"left",types:this.resolve("right","bottomRight"),separate:function(a,b){return a.bottom<b.bottom}},{direction:"up",neighbour:"topRight",types:this.resolve("bottomLeft")}],a.QUARTER_LEFT_BOTTOM_LOW=[{direction:"up",neighbour:"above",types:this.resolve("topLeft","left"),separate:function(a,b){return a.left>b.left}},{direction:"right",neighbour:"bottomRight",types:this.resolve("topLeft")}],a.QUARTER_LEFT_BOTTOM_HIGH=[{direction:"up",neighbour:"topLeft",types:this.resolve("bottomRight")},{direction:"down",neighbour:"below",types:this.resolve("topLeft","top"),separate:!1},{direction:"right",neighbour:"below",types:this.resolve("topLeft","top","bottomRight")}],a.QUARTER_RIGHT_BOTTOM_LOW=[{direction:"up",neighbour:"above",types:this.resolve("bottom","bottomRight"),separate:function(a,b){return a.right<b.right}},{direction:"left",neighbour:"bottomLeft",types:this.resolve("topRight")}],a.QUARTER_RIGHT_BOTTOM_HIGH=[{direction:"up",neighbour:"topRight",types:this.resolve("bottomLeft")},{direction:"down",neighbour:"below",types:this.resolve("top","topRight"),separate:!1},{direction:"left",neighbour:"below",types:this.resolve("top","topRight","bottomLeft")}],a.QUARTER_LEFT_TOP_LOW=[{direction:"up",neighbour:"above",types:this.resolve("bottomLeft","bottom")},{direction:"right",neighbour:"above",types:this.resolve("bottomLeft","bottom"),separate:!1},{direction:"down",neighbour:"bottomLeft",types:this.resolve("topRight")}],a.QUARTER_LEFT_TOP_HIGH=[{direction:"right",neighbour:"topRight",types:this.resolve("bottomLeft")},{direction:"down",neighbour:"below",types:this.resolve("topLeft","top"),separate:function(a,b){return a.left>b.left}}],a.QUARTER_RIGHT_TOP_LOW=[{direction:"up",neighbour:"above",types:this.resolve("bottom","bottomRight")},{direction:"left",neighbour:"above",types:this.resolve("bottom","bottomRight"),separate:!1},{direction:"down",neighbour:"bottomRight",types:this.resolve("topLeft")}],a.QUARTER_RIGHT_TOP_HIGH=[{direction:"left",neighbour:"topLeft",types:this.resolve("bottomRight")},{direction:"down",neighbour:"below",types:this.resolve("top","topRight"),separate:function(a,b){return a.right<b.right}}],a.QUARTER_TOP_LEFT_LOW=[{direction:"right",neighbour:"topRight",types:this.resolve("bottomLeft")},{direction:"left",neighbour:"left",types:this.resolve("topRight","right"),separate:!1},{direction:"down",neighbour:"left",types:this.resolve("bottomLeft","topRight","right")}],a.QUARTER_TOP_LEFT_HIGH=[{direction:"right",neighbour:"right",types:this.resolve("topLeft","left"),separate:function(a,b){return a.top>b.top}},{direction:"down",neighbour:"bottomLeft",types:this.resolve("topRight")}],a.QUARTER_TOP_RIGHT_LOW=[{direction:"left",neighbour:"topLeft",types:this.resolve("bottomRight")},{direction:"right",neighbour:"right",types:this.resolve("topLeft","left"),separate:!1},{direction:"down",neighbour:"right",types:this.resolve("bottomRight","topLeft","left")}],a.QUARTER_TOP_RIGHT_HIGH=[{direction:"left",neighbour:"left",types:this.resolve("topRight","right"),separate:function(a,b){return a.top>b.top}},{direction:"down",neighbour:"bottomRight",types:this.resolve("topLeft")}],this.informalRestraints=JSON.parse(JSON.stringify(a)),this.restraints=Phaser.Plugin.ArcadeSlopes.SatRestrainer.prepareRestraints(a)},Phaser.Plugin.ArcadeSlopes.SatRestrainer.intersectArrays=function(a,b){return a.filter(function(a){return-1!==b.indexOf(a)}).filter(function(a,b,c){return c.indexOf(a)===b})},Phaser.Plugin.ArcadeSlopes.SatRestrainer.prototype.resolve=function(){var a=[];if(!arguments.length)return a;for(var b in arguments){var c=arguments[b];if(Phaser.Plugin.ArcadeSlopes.SatRestrainer.hasOwnProperty(c+"Vertices")){var d=Array.prototype.slice.call(Phaser.Plugin.ArcadeSlopes.SatRestrainer[c+"Vertices"]);if(1===arguments.length)return d;a=a.length?Phaser.Plugin.ArcadeSlopes.SatRestrainer.intersectArrays(a,d):d}else console.warn("Tried to resolve types from undefined vertex map location '"+c+"'")}return a},Phaser.Plugin.ArcadeSlopes.SatRestrainer.topVertices=["HALF_LEFT","HALF_RIGHT","QUARTER_LEFT_TOP_LOW","QUARTER_RIGHT_TOP_LOW","QUARTER_LEFT_BOTTOM_LOW","QUARTER_RIGHT_BOTTOM_LOW"],Phaser.Plugin.ArcadeSlopes.SatRestrainer.bottomVertices=["HALF_LEFT","HALF_RIGHT","QUARTER_LEFT_TOP_HIGH","QUARTER_LEFT_BOTTOM_HIGH","QUARTER_RIGHT_TOP_HIGH","QUARTER_RIGHT_BOTTOM_HIGH"],Phaser.Plugin.ArcadeSlopes.SatRestrainer.leftVertices=["HALF_TOP","HALF_BOTTOM","QUARTER_TOP_LEFT_LOW","QUARTER_TOP_RIGHT_HIGH","QUARTER_BOTTOM_LEFT_LOW","QUARTER_BOTTOM_RIGHT_HIGH"],Phaser.Plugin.ArcadeSlopes.SatRestrainer.rightVertices=["HALF_TOP","HALF_BOTTOM","QUARTER_TOP_LEFT_HIGH","QUARTER_TOP_RIGHT_LOW","QUARTER_BOTTOM_LEFT_HIGH","QUARTER_BOTTOM_RIGHT_LOW"],Phaser.Plugin.ArcadeSlopes.SatRestrainer.topLeftVertices=["FULL","HALF_TOP","HALF_LEFT","HALF_TOP_LEFT","HALF_TOP_RIGHT","HALF_BOTTOM_LEFT","QUARTER_TOP_LEFT_LOW","QUARTER_TOP_LEFT_HIGH","QUARTER_TOP_RIGHT_HIGH","QUARTER_BOTTOM_LEFT_HIGH","QUARTER_LEFT_TOP_LOW","QUARTER_LEFT_TOP_HIGH","QUARTER_LEFT_BOTTOM_LOW","QUARTER_LEFT_BOTTOM_HIGH","QUARTER_RIGHT_TOP_HIGH"],Phaser.Plugin.ArcadeSlopes.SatRestrainer.topRightVertices=["FULL","HALF_TOP","HALF_RIGHT","HALF_TOP_LEFT","HALF_TOP_RIGHT","HALF_BOTTOM_RIGHT","QUARTER_TOP_LEFT_LOW","QUARTER_TOP_LEFT_HIGH","QUARTER_TOP_RIGHT_LOW","QUARTER_TOP_RIGHT_HIGH","QUARTER_BOTTOM_RIGHT_HIGH","QUARTER_LEFT_TOP_HIGH","QUARTER_RIGHT_TOP_LOW","QUARTER_RIGHT_TOP_HIGH","QUARTER_RIGHT_BOTTOM_LOW","QUARTER_RIGHT_BOTTOM_HIGH"],Phaser.Plugin.ArcadeSlopes.SatRestrainer.bottomLeftVertices=["FULL","HALF_LEFT","HALF_BOTTOM","HALF_TOP_LEFT","HALF_BOTTOM_LEFT","HALF_BOTTOM_RIGHT","QUARTER_TOP_LEFT_HIGH","QUARTER_BOTTOM_LEFT_LOW","QUARTER_BOTTOM_LEFT_HIGH","QUARTER_BOTTOM_RIGHT_LOW","QUARTER_BOTTOM_RIGHT_HIGH","QUARTER_LEFT_TOP_HIGH","QUARTER_LEFT_BOTTOM_LOW","QUARTER_LEFT_BOTTOM_HIGH","QUARTER_RIGHT_BOTTOM_LOW"],Phaser.Plugin.ArcadeSlopes.SatRestrainer.bottomRightVertices=["FULL","HALF_RIGHT","HALF_BOTTOM","HALF_TOP_RIGHT","HALF_BOTTOM_LEFT","HALF_BOTTOM_RIGHT","QUARTER_TOP_RIGHT_HIGH","QUARTER_BOTTOM_LEFT_LOW","QUARTER_BOTTOM_LEFT_HIGH","QUARTER_BOTTOM_RIGHT_LOW","QUARTER_BOTTOM_RIGHT_HIGH","QUARTER_LEFT_BOTTOM_LOW","QUARTER_RIGHT_TOP_HIGH","QUARTER_RIGHT_BOTTOM_LOW","QUARTER_RIGHT_BOTTOM_HIGH"],Phaser.Plugin.ArcadeSlopes.SatSolver=function(a){this.options=Phaser.Utils.mixin(a||{},{preferY:!1,stick:new Phaser.Point(0,0),restrain:!0}),this.restrainers=[new Phaser.Plugin.ArcadeSlopes.SatRestrainer]},Phaser.Plugin.ArcadeSlopes.SatSolver.prepareResponse=function(a){return a.overlapV.scale(-1),a.overlapN.scale(-1),a},Phaser.Plugin.ArcadeSlopes.SatSolver.putOnSlopeX=function(a,b){var c=Phaser.Point.subtract(b.slope.line.end,b.slope.line.start),d=(a.y-b.slope.line.start.y)/c.y;a.position.x=b.slope.line.start.x+d*c.y},Phaser.Plugin.ArcadeSlopes.SatSolver.putOnSlopeY=function(a,b){var c=Phaser.Point.subtract(b.slope.line.end,b.slope.line.start),d=(a.x-b.slope.line.start.x)/c.x;a.position.y=b.slope.line.start.y+d*c.y},Phaser.Plugin.ArcadeSlopes.SatSolver.minimumOffsetX=function(a){return a.y*a.y/a.x+a.x},Phaser.Plugin.ArcadeSlopes.SatSolver.minimumOffsetY=function(a){return a.x*a.x/a.y+a.y},Phaser.Plugin.ArcadeSlopes.SatSolver.movingAgainstY=function(a,b){return b.overlapV.y<0&&a.velocity.y>0||b.overlapV.y>0&&a.velocity.y<0},Phaser.Plugin.ArcadeSlopes.SatSolver.prototype.shouldPreferY=function(a,b){return(this.options.preferY||a.slopes.preferY)&&0!==b.overlapV.y&&0!==b.overlapV.x&&Phaser.Plugin.ArcadeSlopes.SatSolver.movingAgainstY(a,b)},Phaser.Plugin.ArcadeSlopes.SatSolver.isSeparatingAxis=function(a,b,c,d){var e=SAT.isSeparatingAxis(a.pos,b.pos,a.points,b.points,c,d||null);return d&&(d.a=a,d.b=b,d.overlapV=d.overlapN.clone().scale(d.overlap)),e},Phaser.Plugin.ArcadeSlopes.SatSolver.prototype.separate=function(a,b,c,d){return d||this.shouldSeparate(b.index,a,b,c)?b.collisionCallback&&!b.collisionCallback.call(b.collisionCallbackContext,a.sprite,b)?!1:b.layer.callbacks[b.index]&&!b.layer.callbacks[b.index].callback.call(b.layer.callbacks[b.index].callbackContext,a.sprite,b)?!1:(this.shouldPreferY(a,c)?a.position.y+=Phaser.Plugin.ArcadeSlopes.SatSolver.minimumOffsetY(c.overlapV):(a.position.x+=c.overlapV.x,a.position.y+=c.overlapV.y),!0):!1},Phaser.Plugin.ArcadeSlopes.SatSolver.prototype.applyVelocity=function(a,b,c){a.slopes.velocity.x=a.velocity.x,a.slopes.velocity.y=a.velocity.y;var d=a.slopes.velocity.clone().projectN(c.overlapN),e=a.slopes.velocity.clone().sub(d);d.x=d.x*-a.bounce.x,d.y=d.y*-a.bounce.y,e.x=e.x*(1-a.slopes.friction.x-b.slope.friction.x),e.y=e.y*(1-a.slopes.friction.y-b.slope.friction.y),a.velocity.x=d.x+e.x,a.velocity.y=d.y+e.y,this.pull(a,c)},Phaser.Plugin.ArcadeSlopes.SatSolver.prototype.updateFlags=function(a,b){a.touching.up=a.touching.up||b.overlapV.y>0,a.touching.down=a.touching.down||b.overlapV.y<0,a.touching.left=a.touching.left||b.overlapV.x>0,a.touching.right=a.touching.right||b.overlapV.x<0,a.blocked.up=a.blocked.up||0===b.overlapV.x&&b.overlapV.y>0,a.blocked.down=a.blocked.down||0===b.overlapV.x&&b.overlapV.y<0,a.blocked.left=a.blocked.left||0===b.overlapV.y&&b.overlapV.x>0,a.blocked.right=a.blocked.right||0===b.overlapV.y&&b.overlapV.x<0},Phaser.Plugin.ArcadeSlopes.SatSolver.prototype.snap=function(a,b){if(!(a.slopes.snapUp||a.slopes.snapDown||a.slopes.snapLeft||a.slopes.snapRight))return!1;var c=new Phaser.Point(a.position.x,a.position.y);for(var d in b){var e=b[d];if(e.slope){if(a.slopes.snapUp&&(a.position.x=c.x,a.position.y=c.y-a.slopes.snapUp,this.snapCollide(a,e,c)))return!0;if(a.slopes.snapDown&&(a.position.x=c.x,a.position.y=c.y+a.slopes.snapDown,this.snapCollide(a,e,c)))return!0;if(a.slopes.snapLeft&&(a.position.x=c.x-a.slopes.snapLeft,a.position.y=c.y,this.snapCollide(a,e,c)))return!0;if(a.slopes.snapRight&&(a.position.x=c.x+a.slopes.snapRight,a.position.y=c.y,this.snapCollide(a,e,c)))return!0}}return!1},Phaser.Plugin.ArcadeSlopes.SatSolver.prototype.pull=function(a,b){if(!(a.slopes.pullUp||a.slopes.pullDown||a.slopes.pullLeft||a.slopes.pullRight))return!1;var c=b.overlapN.clone().scale(-1);return a.slopes.pullUp&&c.y<0?(pullUp=c.clone().scale(a.slopes.pullUp),a.velocity.x+=pullUp.x,a.velocity.y+=pullUp.y,!0):a.slopes.pullDown&&c.y>0?(pullDown=c.clone().scale(a.slopes.pullDown),a.velocity.x+=pullDown.x,a.velocity.y+=pullDown.y,!0):a.slopes.pullLeft&&c.x<0?(pullLeft=c.clone().scale(a.slopes.pullLeft),a.velocity.x+=pullLeft.x,a.velocity.y+=pullLeft.y,!0):a.slopes.pullRight&&c.x>0?(pullRight=c.clone().scale(a.slopes.pullRight),a.velocity.x+=pullRight.x,a.velocity.y+=pullRight.y,!0):!1},Phaser.Plugin.ArcadeSlopes.SatSolver.prototype.snapCollide=function(a,b,c){return this.collide(0,a,b)?!0:(a.position.x=c.x,a.position.y=c.y,!1)},Phaser.Plugin.ArcadeSlopes.SatSolver.prototype.collide=function(a,b,c,d){if(!(b.enable&&b.polygon&&b.slopes&&c.slope&&c.slope.polygon))return!1;b.polygon.pos.x=b.x,b.polygon.pos.y=b.y,c.slope.polygon.pos.x=c.worldX,c.slope.polygon.pos.y=c.worldY;var e=new SAT.Response;return SAT.testPolygonPolygon(b.polygon,c.slope.polygon,e)?d?!0:(b.overlapX=e.overlapV.x,b.overlapY=e.overlapV.y,b.slopes.sat.response=e,Phaser.Plugin.ArcadeSlopes.SatSolver.prepareResponse(e),this.separate(b,c,e)?(this.applyVelocity(b,c,e),this.updateFlags(b,e),!0):!1):!1},Phaser.Plugin.ArcadeSlopes.SatSolver.prototype.collideOnAxis=function(a,b,c,d){if(!(a.enable&&a.polygon&&a.slopes&&b.slope&&b.slope.polygon))return!1;d=d||new SAT.Response;var e=Phaser.Plugin.ArcadeSlopes.SatSolver.isSeparatingAxis(a.polygon,b.slope.polygon,c,d);return e?!1:(Phaser.Plugin.ArcadeSlopes.SatSolver.prepareResponse(d),this.separate(a,b,d,!0)?(this.applyVelocity(a,b,d),this.updateFlags(a,d),!0):!1)},Phaser.Plugin.ArcadeSlopes.SatSolver.prototype.shouldSeparate=function(a,b,c,d){
if(!b.enable||!d.overlap)return!1;if(c.slope.edges.top===Phaser.Plugin.ArcadeSlopes.TileSlope.EMPTY&&d.overlapN.y<0&&0===d.overlapN.x)return!1;if(c.slope.edges.bottom===Phaser.Plugin.ArcadeSlopes.TileSlope.EMPTY&&d.overlapN.y>0&&0===d.overlapN.x)return!1;if(c.slope.edges.left===Phaser.Plugin.ArcadeSlopes.TileSlope.EMPTY&&d.overlapN.x<0&&0===d.overlapN.y)return!1;if(c.slope.edges.right===Phaser.Plugin.ArcadeSlopes.TileSlope.EMPTY&&d.overlapN.x>0&&0===d.overlapN.y)return!1;if(!this.options.restrain)return!0;for(var e in this.restrainers){var f=this.restrainers[e];if("function"==typeof f.restrain&&!f.restrain(this,b,c,d))return!1}return!0},Phaser.Plugin.ArcadeSlopes.SatSolver.prototype.debug=function(a,b){},Phaser.Plugin.ArcadeSlopes.TileSlope=function(a,b,c,d,e,f){this.type=a,this.tile=b,this.polygon=c,this.line=d,this.edges=Phaser.Utils.mixin(e||{},{top:Phaser.Plugin.ArcadeSlopes.TileSlope.SOLID,bottom:Phaser.Plugin.ArcadeSlopes.TileSlope.SOLID,left:Phaser.Plugin.ArcadeSlopes.TileSlope.SOLID,right:Phaser.Plugin.ArcadeSlopes.TileSlope.SOLID}),this.axis=f||null,this.solver=null,this.friction=new Phaser.Point},Phaser.Plugin.ArcadeSlopes.TileSlope.resolveType=function(a){return parseInt(a)>-1?a:Phaser.Plugin.ArcadeSlopes.TileSlope.hasOwnProperty(a)?Phaser.Plugin.ArcadeSlopes.TileSlope[a]:(console.warn("Unresolved slope type '"+a+"'"),-1)},Object.defineProperty(Phaser.Plugin.ArcadeSlopes.TileSlope.prototype,"slope",{get:function(){return this.line?(this.line.start.y-this.line.end.y)/(this.line.start.x-this.line.end.x):0}}),Object.defineProperty(Phaser.Plugin.ArcadeSlopes.TileSlope.prototype,"typeName",{get:function(){return Phaser.Plugin.ArcadeSlopes.TileSlope.resolveTypeName(this.type)},set:function(a){this.type=Phaser.Plugin.ArcadeSlopes.TileSlope.resolveType(a)}}),Phaser.Plugin.ArcadeSlopes.TileSlope.resolveTypeName=function(a){return Phaser.Plugin.ArcadeSlopes.TileSlope.typeNames.hasOwnProperty(a)?Phaser.Plugin.ArcadeSlopes.TileSlope.typeNames[a]:Phaser.Plugin.ArcadeSlopes.TileSlope.typeNames[-1]},Phaser.Plugin.ArcadeSlopes.TileSlope.typeNames={"-1":"UNKNOWN",0:"FULL",21:"HALF_BOTTOM",22:"HALF_TOP",23:"HALF_LEFT",24:"HALF_RIGHT",1:"HALF_BOTTOM_LEFT",2:"HALF_BOTTOM_RIGHT",3:"HALF_TOP_LEFT",4:"HALF_TOP_RIGHT",5:"QUARTER_BOTTOM_LEFT_LOW",6:"QUARTER_BOTTOM_LEFT_HIGH",7:"QUARTER_BOTTOM_RIGHT_LOW",8:"QUARTER_BOTTOM_RIGHT_HIGH",9:"QUARTER_LEFT_BOTTOM_LOW",10:"QUARTER_LEFT_BOTTOM_HIGH",11:"QUARTER_RIGHT_BOTTOM_LOW",12:"QUARTER_RIGHT_BOTTOM_HIGH",13:"QUARTER_LEFT_TOP_LOW",14:"QUARTER_LEFT_TOP_HIGH",15:"QUARTER_RIGHT_TOP_LOW",16:"QUARTER_RIGHT_TOP_HIGH",17:"QUARTER_TOP_LEFT_LOW",18:"QUARTER_TOP_LEFT_HIGH",19:"QUARTER_TOP_RIGHT_LOW",20:"QUARTER_TOP_RIGHT_HIGH"},Phaser.Plugin.ArcadeSlopes.TileSlope.EMPTY=0,Phaser.Plugin.ArcadeSlopes.TileSlope.SOLID=1,Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING=2,Phaser.Plugin.ArcadeSlopes.TileSlope.UNKNOWN=-1,Phaser.Plugin.ArcadeSlopes.TileSlope.FULL=0,Phaser.Plugin.ArcadeSlopes.TileSlope.HALF_BOTTOM=21,Phaser.Plugin.ArcadeSlopes.TileSlope.HALF_TOP=22,Phaser.Plugin.ArcadeSlopes.TileSlope.HALF_LEFT=23,Phaser.Plugin.ArcadeSlopes.TileSlope.HALF_RIGHT=24,Phaser.Plugin.ArcadeSlopes.TileSlope.HALF_BOTTOM_LEFT=1,Phaser.Plugin.ArcadeSlopes.TileSlope.HALF_BOTTOM_RIGHT=2,Phaser.Plugin.ArcadeSlopes.TileSlope.HALF_TOP_LEFT=3,Phaser.Plugin.ArcadeSlopes.TileSlope.HALF_TOP_RIGHT=4,Phaser.Plugin.ArcadeSlopes.TileSlope.QUARTER_BOTTOM_LEFT_LOW=5,Phaser.Plugin.ArcadeSlopes.TileSlope.QUARTER_BOTTOM_LEFT_HIGH=6,Phaser.Plugin.ArcadeSlopes.TileSlope.QUARTER_BOTTOM_RIGHT_LOW=7,Phaser.Plugin.ArcadeSlopes.TileSlope.QUARTER_BOTTOM_RIGHT_HIGH=8,Phaser.Plugin.ArcadeSlopes.TileSlope.QUARTER_LEFT_BOTTOM_LOW=9,Phaser.Plugin.ArcadeSlopes.TileSlope.QUARTER_LEFT_BOTTOM_HIGH=10,Phaser.Plugin.ArcadeSlopes.TileSlope.QUARTER_RIGHT_BOTTOM_LOW=11,Phaser.Plugin.ArcadeSlopes.TileSlope.QUARTER_RIGHT_BOTTOM_HIGH=12,Phaser.Plugin.ArcadeSlopes.TileSlope.QUARTER_LEFT_TOP_LOW=13,Phaser.Plugin.ArcadeSlopes.TileSlope.QUARTER_LEFT_TOP_HIGH=14,Phaser.Plugin.ArcadeSlopes.TileSlope.QUARTER_RIGHT_TOP_LOW=15,Phaser.Plugin.ArcadeSlopes.TileSlope.QUARTER_RIGHT_TOP_HIGH=16,Phaser.Plugin.ArcadeSlopes.TileSlope.QUARTER_TOP_LEFT_LOW=17,Phaser.Plugin.ArcadeSlopes.TileSlope.QUARTER_TOP_LEFT_HIGH=18,Phaser.Plugin.ArcadeSlopes.TileSlope.QUARTER_TOP_RIGHT_LOW=19,Phaser.Plugin.ArcadeSlopes.TileSlope.QUARTER_TOP_RIGHT_HIGH=20,Phaser.Plugin.ArcadeSlopes.TileSlopeFactory=function(){this.definitions={},this.definitions[Phaser.Plugin.ArcadeSlopes.TileSlope.FULL]=Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createFull,this.definitions[Phaser.Plugin.ArcadeSlopes.TileSlope.HALF_BOTTOM]=Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createHalfBottom,this.definitions[Phaser.Plugin.ArcadeSlopes.TileSlope.HALF_TOP]=Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createHalfTop,this.definitions[Phaser.Plugin.ArcadeSlopes.TileSlope.HALF_LEFT]=Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createHalfLeft,this.definitions[Phaser.Plugin.ArcadeSlopes.TileSlope.HALF_RIGHT]=Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createHalfRight,this.definitions[Phaser.Plugin.ArcadeSlopes.TileSlope.HALF_BOTTOM_LEFT]=Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createHalfBottomLeft,this.definitions[Phaser.Plugin.ArcadeSlopes.TileSlope.HALF_BOTTOM_RIGHT]=Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createHalfBottomRight,this.definitions[Phaser.Plugin.ArcadeSlopes.TileSlope.HALF_TOP_LEFT]=Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createHalfTopLeft,this.definitions[Phaser.Plugin.ArcadeSlopes.TileSlope.HALF_TOP_RIGHT]=Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createHalfTopRight,this.definitions[Phaser.Plugin.ArcadeSlopes.TileSlope.QUARTER_BOTTOM_LEFT_LOW]=Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createQuarterBottomLeftLow,this.definitions[Phaser.Plugin.ArcadeSlopes.TileSlope.QUARTER_BOTTOM_LEFT_HIGH]=Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createQuarterBottomLeftHigh,this.definitions[Phaser.Plugin.ArcadeSlopes.TileSlope.QUARTER_BOTTOM_RIGHT_LOW]=Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createQuarterBottomRightLow,this.definitions[Phaser.Plugin.ArcadeSlopes.TileSlope.QUARTER_BOTTOM_RIGHT_HIGH]=Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createQuarterBottomRightHigh,this.definitions[Phaser.Plugin.ArcadeSlopes.TileSlope.QUARTER_LEFT_BOTTOM_LOW]=Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createQuarterLeftBottomLow,this.definitions[Phaser.Plugin.ArcadeSlopes.TileSlope.QUARTER_LEFT_BOTTOM_HIGH]=Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createQuarterLeftBottomHigh,this.definitions[Phaser.Plugin.ArcadeSlopes.TileSlope.QUARTER_RIGHT_BOTTOM_LOW]=Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createQuarterRightBottomLow,this.definitions[Phaser.Plugin.ArcadeSlopes.TileSlope.QUARTER_RIGHT_BOTTOM_HIGH]=Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createQuarterRightBottomHigh,this.definitions[Phaser.Plugin.ArcadeSlopes.TileSlope.QUARTER_LEFT_TOP_LOW]=Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createQuarterLeftTopLow,this.definitions[Phaser.Plugin.ArcadeSlopes.TileSlope.QUARTER_LEFT_TOP_HIGH]=Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createQuarterLeftTopHigh,this.definitions[Phaser.Plugin.ArcadeSlopes.TileSlope.QUARTER_RIGHT_TOP_LOW]=Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createQuarterRightTopLow,this.definitions[Phaser.Plugin.ArcadeSlopes.TileSlope.QUARTER_RIGHT_TOP_HIGH]=Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createQuarterRightTopHigh,this.definitions[Phaser.Plugin.ArcadeSlopes.TileSlope.QUARTER_TOP_LEFT_LOW]=Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createQuarterTopLeftLow,this.definitions[Phaser.Plugin.ArcadeSlopes.TileSlope.QUARTER_TOP_LEFT_HIGH]=Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createQuarterTopLeftHigh,this.definitions[Phaser.Plugin.ArcadeSlopes.TileSlope.QUARTER_TOP_RIGHT_LOW]=Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createQuarterTopRightLow,this.definitions[Phaser.Plugin.ArcadeSlopes.TileSlope.QUARTER_TOP_RIGHT_HIGH]=Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createQuarterTopRightHigh},Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.prototype.constructor=Phaser.Plugin.ArcadeSlopes.TileSlopeFactory,Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.prototype.define=function(a,b){"function"==typeof b&&(this.definitions[a]=b)},Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.prototype.create=function(a,b){var c=a;return a=Phaser.Plugin.ArcadeSlopes.TileSlope.resolveType(c),this.definitions.hasOwnProperty(a)?"function"!=typeof this.definitions[a]?(console.warn("Slope type definition for type "+c+" is not a function"),null):this.definitions[a].call(this,a,b):(console.warn("Slope type "+c+" not defined"),null)},Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.prototype.convertTilemap=function(a,b,c){return b=a.getLayer(b),this.convertTilemapLayer(b,c),a},Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.prototype.convertTilemapLayer=function(a,b){var c=this;return a.layer.data.forEach(function(d){d.forEach(function(d){if(b.hasOwnProperty(d.index)){var e=c.create(b[d.index],d);e&&(d.slope=e)}var f=d.x,g=d.y;d.neighbours=d.neighbours||{},d.neighbours.above=a.map.getTileAbove(a.index,f,g),d.neighbours.below=a.map.getTileBelow(a.index,f,g),d.neighbours.left=a.map.getTileLeft(a.index,f,g),d.neighbours.right=a.map.getTileRight(a.index,f,g),d.neighbours.topLeft=a.map.getTileTopLeft(a.index,f,g),d.neighbours.topRight=a.map.getTileTopRight(a.index,f,g),d.neighbours.bottomLeft=a.map.getTileBottomLeft(a.index,f,g),d.neighbours.bottomRight=a.map.getTileBottomRight(a.index,f,g)})}),this.calculateEdges(a),a},Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.prototype.calculateEdges=function(a){for(var b=null,c=null,d=null,e=null,f=0,g=a.layer.height;g>f;f++)for(var h=0,i=a.layer.width;i>h;h++){var j=a.layer.data[f][h];j&&j.hasOwnProperty("slope")&&(b=a.map.getTileAbove(a.index,h,f),c=a.map.getTileBelow(a.index,h,f),d=a.map.getTileLeft(a.index,h,f),e=a.map.getTileRight(a.index,h,f),b&&b.hasOwnProperty("slope")&&(j.slope.edges.top=this.compareEdges(j.slope.edges.top,b.slope.edges.bottom)),c&&c.hasOwnProperty("slope")&&(j.slope.edges.bottom=this.compareEdges(j.slope.edges.bottom,c.slope.edges.top)),d&&d.hasOwnProperty("slope")&&(j.slope.edges.left=this.compareEdges(j.slope.edges.left,d.slope.edges.right)),e&&e.hasOwnProperty("slope")&&(j.slope.edges.right=this.compareEdges(j.slope.edges.right,e.slope.edges.left)))}},Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.prototype.compareEdges=function(a,b){return a===Phaser.Plugin.ArcadeSlopes.TileSlope.SOLID&&b===Phaser.Plugin.ArcadeSlopes.TileSlope.SOLID?Phaser.Plugin.ArcadeSlopes.TileSlope.EMPTY:a===Phaser.Plugin.ArcadeSlopes.TileSlope.SOLID&&b===Phaser.Plugin.ArcadeSlopes.TileSlope.EMPTY?Phaser.Plugin.ArcadeSlopes.TileSlope.EMPTY:a},Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createFull=function(a,b){var c=new SAT.Box(new SAT.Vector(b.worldX,b.worldY),b.width,b.height).toPolygon();return new Phaser.Plugin.ArcadeSlopes.TileSlope(a,b,c)},Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createHalfBottom=function(a,b){var c=b.height/2,d=new SAT.Polygon(new SAT.Vector(b.worldX,b.worldY),[new SAT.Vector(0,c),new SAT.Vector(b.width,c),new SAT.Vector(b.width,b.height),new SAT.Vector(0,b.height)]),e=new Phaser.Line(b.left,b.top+b.height/2,b.right,b.top+b.height/2),f={top:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING,left:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING,right:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING};return new Phaser.Plugin.ArcadeSlopes.TileSlope(a,b,d,e,f)},Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createHalfTop=function(a,b){var c=b.height/2,d=new SAT.Polygon(new SAT.Vector(b.worldX,b.worldY),[new SAT.Vector(0,0),new SAT.Vector(b.width,0),new SAT.Vector(b.width,c),new SAT.Vector(0,c)]),e=new Phaser.Line(b.left,b.top,b.right,b.top),f={bottom:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING,left:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING,right:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING};return new Phaser.Plugin.ArcadeSlopes.TileSlope(a,b,d,e,f)},Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createHalfLeft=function(a,b){var c=b.width/2,d=new SAT.Polygon(new SAT.Vector(b.worldX,b.worldY),[new SAT.Vector(0,0),new SAT.Vector(c,0),new SAT.Vector(c,b.height),new SAT.Vector(0,b.height)]),e=new Phaser.Line(b.left+c,b.top,b.left+c,b.bottom),f={top:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING,bottom:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING,right:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING};return new Phaser.Plugin.ArcadeSlopes.TileSlope(a,b,d,e,f)},Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createHalfRight=function(a,b){var c=b.width/2,d=new SAT.Polygon(new SAT.Vector(b.worldX,b.worldY),[new SAT.Vector(c,0),new SAT.Vector(b.width,0),new SAT.Vector(b.width,b.height),new SAT.Vector(c,b.height)]),e=new Phaser.Line(b.left+c,b.top,b.left+c,b.bottom),f={top:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING,bottom:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING,left:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING};return new Phaser.Plugin.ArcadeSlopes.TileSlope(a,b,d,e,f)},Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createHalfBottomLeft=function(a,b){var c=new SAT.Polygon(new SAT.Vector(b.worldX,b.worldY),[new SAT.Vector(0,0),new SAT.Vector(b.width,b.height),new SAT.Vector(0,b.height)]),d=new Phaser.Line(b.left,b.top,b.right,b.bottom),e={top:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING,right:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING},f=new SAT.Vector(.7071067811865475,-.7071067811865475);return new Phaser.Plugin.ArcadeSlopes.TileSlope(a,b,c,d,e,f)},Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createHalfBottomRight=function(a,b){var c=new SAT.Polygon(new SAT.Vector(b.worldX,b.worldY),[new SAT.Vector(b.width,0),new SAT.Vector(b.width,b.height),new SAT.Vector(0,b.height)]),d=new Phaser.Line(b.left,b.bottom,b.right,b.top),e={top:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING,left:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING},f=new SAT.Vector(-.707106781186548,-.707106781186548);return new Phaser.Plugin.ArcadeSlopes.TileSlope(a,b,c,d,e,f)},Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createHalfTopLeft=function(a,b){var c=new SAT.Polygon(new SAT.Vector(b.worldX,b.worldY),[new SAT.Vector(0,0),new SAT.Vector(b.width,0),new SAT.Vector(0,b.height)]),d=new Phaser.Line(b.right,b.top,b.left,b.bottom),e={bottom:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING,right:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING},f=new SAT.Vector(.7071067811865475,.7071067811865475);return new Phaser.Plugin.ArcadeSlopes.TileSlope(a,b,c,d,e,f)},Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createHalfTopRight=function(a,b){var c=new SAT.Polygon(new SAT.Vector(b.worldX,b.worldY),[new SAT.Vector(0,0),new SAT.Vector(b.width,0),new SAT.Vector(b.width,b.height)]),d=new Phaser.Line(b.right,b.bottom,b.left,b.top),e={bottom:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING,left:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING},f=new SAT.Vector(-.7071067811865475,.7071067811865475);return new Phaser.Plugin.ArcadeSlopes.TileSlope(a,b,c,d,e,f)},Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createQuarterBottomLeftLow=function(a,b){var c=new SAT.Polygon(new SAT.Vector(b.worldX,b.worldY),[new SAT.Vector(0,b.height/2),new SAT.Vector(b.width,b.height),new SAT.Vector(0,b.height)]),d=new Phaser.Line(b.left,b.top+b.height/2,b.right,b.bottom),e={top:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING,left:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING,right:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING},f=new SAT.Vector(.4472135954999579,-.8944271909999159);return new Phaser.Plugin.ArcadeSlopes.TileSlope(a,b,c,d,e,f)},Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createQuarterBottomLeftHigh=function(a,b){var c=new SAT.Polygon(new SAT.Vector(b.worldX,b.worldY),[new SAT.Vector(0,0),new SAT.Vector(b.width,b.height/2),new SAT.Vector(b.width,b.height),new SAT.Vector(0,b.height)]),d=new Phaser.Line(b.left,b.top,b.right,b.top+b.height/2),e={top:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING,right:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING},f=new SAT.Vector(.4472135954999579,-.8944271909999159);return new Phaser.Plugin.ArcadeSlopes.TileSlope(a,b,c,d,e,f)},Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createQuarterBottomRightLow=function(a,b){var c=new SAT.Polygon(new SAT.Vector(b.worldX,b.worldY),[new SAT.Vector(b.width,b.height/2),new SAT.Vector(b.width,b.height),new SAT.Vector(0,b.height)]),d=new Phaser.Line(b.left,b.bottom,b.right,b.top+b.height/2),e={top:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING,left:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING,right:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING},f=new SAT.Vector(-.4472135954999579,-.8944271909999159);return new Phaser.Plugin.ArcadeSlopes.TileSlope(a,b,c,d,e,f)},Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createQuarterBottomRightHigh=function(a,b){var c=new SAT.Polygon(new SAT.Vector(b.worldX,b.worldY),[new SAT.Vector(b.width,0),new SAT.Vector(0,b.height/2),new SAT.Vector(0,b.height),new SAT.Vector(b.width,b.height)]),d=new Phaser.Line(b.left,b.bottom,b.right,b.top+b.height/2),e={top:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING,left:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING},f=new SAT.Vector(-.4472135954999579,-.8944271909999159);return new Phaser.Plugin.ArcadeSlopes.TileSlope(a,b,c,d,e,f)},Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createQuarterLeftBottomLow=function(a,b){var c=new SAT.Polygon(new SAT.Vector(b.worldX,b.worldY),[new SAT.Vector(0,0),new SAT.Vector(b.width/2,0),new SAT.Vector(b.width,b.height),new SAT.Vector(0,b.height)]),d=new Phaser.Line(b.left+b.width/2,b.top,b.right,b.bottom),e={top:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING,right:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING},f=new SAT.Vector(.8944271909999159,-.4472135954999579);return new Phaser.Plugin.ArcadeSlopes.TileSlope(a,b,c,d,e,f)},Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createQuarterLeftBottomHigh=function(a,b){var c=new SAT.Polygon(new SAT.Vector(b.worldX,b.worldY),[new SAT.Vector(0,0),new SAT.Vector(b.width/2,b.height),new SAT.Vector(0,b.height)]),d=new Phaser.Line(b.left,b.top,b.left+b.width/2,b.bottom),e={top:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING,bottom:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING,right:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING},f=new SAT.Vector(.8944271909999159,-.4472135954999579);return new Phaser.Plugin.ArcadeSlopes.TileSlope(a,b,c,d,e,f)},Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createQuarterRightBottomLow=function(a,b){var c=new SAT.Polygon(new SAT.Vector(b.worldX,b.worldY),[new SAT.Vector(b.width/2,0),new SAT.Vector(b.width,0),new SAT.Vector(b.width,b.height),new SAT.Vector(0,b.height)]),d=new Phaser.Line(b.left,b.bottom,b.left+b.width/2,b.top),e={top:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING,left:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING},f=new SAT.Vector(-.8944271909999159,-.4472135954999579);return new Phaser.Plugin.ArcadeSlopes.TileSlope(a,b,c,d,e,f)},Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createQuarterRightBottomHigh=function(a,b){var c=new SAT.Polygon(new SAT.Vector(b.worldX,b.worldY),[new SAT.Vector(b.width,0),new SAT.Vector(b.width,b.height),new SAT.Vector(b.width/2,b.height)]),d=new Phaser.Line(b.left+b.width/2,b.bottom,b.right,b.top),e={top:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING,bottom:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING,left:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING},f=new SAT.Vector(-.8944271909999159,-.4472135954999579);return new Phaser.Plugin.ArcadeSlopes.TileSlope(a,b,c,d,e,f)},Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createQuarterLeftTopLow=function(a,b){var c=new SAT.Polygon(new SAT.Vector(b.worldX,b.worldY),[new SAT.Vector(0,0),new SAT.Vector(b.width/2,0),new SAT.Vector(0,b.height)]),d=new Phaser.Line(0,b.height,b.width/2,0),e={top:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING,bottom:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING,right:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING},f=new SAT.Vector(.8944271909999159,.4472135954999579);return new Phaser.Plugin.ArcadeSlopes.TileSlope(a,b,c,d,e,f)},Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createQuarterLeftTopHigh=function(a,b){var c=new SAT.Polygon(new SAT.Vector(b.worldX,b.worldY),[new SAT.Vector(0,0),new SAT.Vector(b.width,0),new SAT.Vector(b.width/2,b.height),new SAT.Vector(0,b.height)]),d=new Phaser.Line(b.left+b.width/2,b.bottom,b.right,b.bottom),e={bottom:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING,right:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING},f=new SAT.Vector(.8944271909999159,.4472135954999579);return new Phaser.Plugin.ArcadeSlopes.TileSlope(a,b,c,d,e,f)},Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createQuarterRightTopLow=function(a,b){var c=new SAT.Polygon(new SAT.Vector(b.worldX,b.worldY),[new SAT.Vector(b.width/2,0),new SAT.Vector(b.width,0),new SAT.Vector(b.width,b.height)]),d=new Phaser.Line(b.left+b.width/2,b.top,b.right,b.bottom),e={top:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING,bottom:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING,right:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING},f=new SAT.Vector(-.8944271909999159,.4472135954999579);return new Phaser.Plugin.ArcadeSlopes.TileSlope(a,b,c,d,e,f)},Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createQuarterRightTopHigh=function(a,b){var c=new SAT.Polygon(new SAT.Vector(b.worldX,b.worldY),[new SAT.Vector(0,0),new SAT.Vector(b.width,0),new SAT.Vector(b.width,b.height),new SAT.Vector(b.width/2,b.height)]),d=new Phaser.Line(b.left,b.top,b.left+b.width/2,b.bottom),e={bottom:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING,right:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING},f=new SAT.Vector(-.8944271909999159,.4472135954999579);return new Phaser.Plugin.ArcadeSlopes.TileSlope(a,b,c,d,e,f)},Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createQuarterTopLeftLow=function(a,b){var c=new SAT.Polygon(new SAT.Vector(b.worldX,b.worldY),[new SAT.Vector(0,0),new SAT.Vector(b.width,0),new SAT.Vector(0,b.height/2)]),d=new Phaser.Line(b.left,b.top+b.height/2,b.right,b.top),e={bottom:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING,left:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING,right:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING},f=new SAT.Vector(.4472135954999579,.8944271909999159);return new Phaser.Plugin.ArcadeSlopes.TileSlope(a,b,c,d,e,f)},Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createQuarterTopLeftHigh=function(a,b){var c=new SAT.Polygon(new SAT.Vector(b.worldX,b.worldY),[new SAT.Vector(0,0),new SAT.Vector(b.width,0),new SAT.Vector(b.width,b.height/2),new SAT.Vector(0,b.height)]),d=new Phaser.Line(b.left,b.bottom,b.right,b.top+b.height/2),e={bottom:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING,right:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING},f=new SAT.Vector(.4472135954999579,.8944271909999159);return new Phaser.Plugin.ArcadeSlopes.TileSlope(a,b,c,d,e,f)},Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createQuarterTopRightLow=function(a,b){var c=new SAT.Polygon(new SAT.Vector(b.worldX,b.worldY),[new SAT.Vector(0,0),new SAT.Vector(b.width,0),new SAT.Vector(b.width,b.height/2)]),d=new Phaser.Line(b.left,b.top,b.right,b.top+b.height/2),e={bottom:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING,left:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING,right:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING},f=new SAT.Vector(-.4472135954999579,.8944271909999159);return new Phaser.Plugin.ArcadeSlopes.TileSlope(a,b,c,d,e,f)},Phaser.Plugin.ArcadeSlopes.TileSlopeFactory.createQuarterTopRightHigh=function(a,b){var c=new SAT.Polygon(new SAT.Vector(b.worldX,b.worldY),[new SAT.Vector(0,0),new SAT.Vector(b.width,0),new SAT.Vector(b.width,b.height),new SAT.Vector(0,b.height/2)]),d=new Phaser.Line(b.left,b.top+b.height/2,b.right,b.top+b.height),e={bottom:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING,left:Phaser.Plugin.ArcadeSlopes.TileSlope.INTERESTING},f=new SAT.Vector(-.4472135954999579,.8944271909999159);return new Phaser.Plugin.ArcadeSlopes.TileSlope(a,b,c,d,e,f)},function(c,e){"use strict";"function"==typeof d&&d.amd?d(e):"object"==typeof b?a.exports=e():c.SAT=e()}(this,function(){"use strict";function a(a,b){this.x=a||0,this.y=b||0}function b(b,c){this.pos=b||new a,this.r=c||0}function c(b,c){this.pos=b||new a,this.angle=0,this.offset=new a,this.setPoints(c||[])}function d(b,c,d){this.pos=b||new a,this.w=c||0,this.h=d||0}function e(){this.a=null,this.b=null,this.overlapN=new a,this.overlapV=new a,this.clear()}function f(a,b,c){for(var d=Number.MAX_VALUE,e=-Number.MAX_VALUE,f=a.length,g=0;f>g;g++){var h=a[g].dot(b);d>h&&(d=h),h>e&&(e=h)}c[0]=d,c[1]=e}function g(a,b,c,d,e,g){var h=r.pop(),i=r.pop(),j=p.pop().copy(b).sub(a),k=j.dot(e);if(f(c,e,h),f(d,e,i),i[0]+=k,i[1]+=k,h[0]>i[1]||i[0]>h[1])return p.push(j),r.push(h),r.push(i),!0;if(g){var l=0;if(h[0]<i[0])if(g.aInB=!1,h[1]<i[1])l=h[1]-i[0],g.bInA=!1;else{var m=h[1]-i[0],n=i[1]-h[0];l=n>m?m:-n}else if(g.bInA=!1,h[1]>i[1])l=h[0]-i[1],g.aInB=!1;else{var m=h[1]-i[0],n=i[1]-h[0];l=n>m?m:-n}var o=Math.abs(l);o<g.overlap&&(g.overlap=o,g.overlapN.copy(e),0>l&&g.overlapN.reverse())}return p.push(j),r.push(h),r.push(i),!1}function h(a,b){var c=a.len2(),d=b.dot(a);return 0>d?u:d>c?w:v}function i(a,b){var c=p.pop().copy(a).sub(b.pos),d=b.r*b.r,e=c.len2();return p.push(c),d>=e}function j(a,b){t.pos.copy(a),s.clear();var c=n(t,b,s);return c&&(c=s.aInB),c}function k(a,b,c){var d=p.pop().copy(b.pos).sub(a.pos),e=a.r+b.r,f=e*e,g=d.len2();if(g>f)return p.push(d),!1;if(c){var h=Math.sqrt(g);c.a=a,c.b=b,c.overlap=e-h,c.overlapN.copy(d.normalize()),c.overlapV.copy(d).scale(c.overlap),c.aInB=a.r<=b.r&&h<=b.r-a.r,c.bInA=b.r<=a.r&&h<=a.r-b.r}return p.push(d),!0}function l(a,b,c){for(var d=p.pop().copy(b.pos).sub(a.pos),e=b.r,f=e*e,g=a.calcPoints,i=g.length,j=p.pop(),k=p.pop(),l=0;i>l;l++){var m=l===i-1?0:l+1,n=0===l?i-1:l-1,o=0,q=null;j.copy(a.edges[l]),k.copy(d).sub(g[l]),c&&k.len2()>f&&(c.aInB=!1);var r=h(j,k);if(r===u){j.copy(a.edges[n]);var s=p.pop().copy(d).sub(g[n]);if(r=h(j,s),r===w){var t=k.len();if(t>e)return p.push(d),p.push(j),p.push(k),p.push(s),!1;c&&(c.bInA=!1,q=k.normalize(),o=e-t)}p.push(s)}else if(r===w){if(j.copy(a.edges[m]),k.copy(d).sub(g[m]),r=h(j,k),r===u){var t=k.len();if(t>e)return p.push(d),p.push(j),p.push(k),!1;c&&(c.bInA=!1,q=k.normalize(),o=e-t)}}else{var v=j.perp().normalize(),t=k.dot(v),x=Math.abs(t);if(t>0&&x>e)return p.push(d),p.push(v),p.push(k),!1;c&&(q=v,o=e-t,(t>=0||2*e>o)&&(c.bInA=!1))}q&&c&&Math.abs(o)<Math.abs(c.overlap)&&(c.overlap=o,c.overlapN.copy(q))}return c&&(c.a=a,c.b=b,c.overlapV.copy(c.overlapN).scale(c.overlap)),p.push(d),p.push(j),p.push(k),!0}function m(a,b,c){var d=l(b,a,c);if(d&&c){var e=c.a,f=c.aInB;c.overlapN.reverse(),c.overlapV.reverse(),c.a=c.b,c.b=e,c.aInB=c.bInA,c.bInA=f}return d}function n(a,b,c){for(var d=a.calcPoints,e=d.length,f=b.calcPoints,h=f.length,i=0;e>i;i++)if(g(a.pos,b.pos,d,f,a.normals[i],c))return!1;for(var i=0;h>i;i++)if(g(a.pos,b.pos,d,f,b.normals[i],c))return!1;return c&&(c.a=a,c.b=b,c.overlapV.copy(c.overlapN).scale(c.overlap)),!0}var o={};o.Vector=a,o.V=a,a.prototype.copy=a.prototype.copy=function(a){return this.x=a.x,this.y=a.y,this},a.prototype.clone=a.prototype.clone=function(){return new a(this.x,this.y)},a.prototype.perp=a.prototype.perp=function(){var a=this.x;return this.x=this.y,this.y=-a,this},a.prototype.rotate=a.prototype.rotate=function(a){var b=this.x,c=this.y;return this.x=b*Math.cos(a)-c*Math.sin(a),this.y=b*Math.sin(a)+c*Math.cos(a),this},a.prototype.reverse=a.prototype.reverse=function(){return this.x=-this.x,this.y=-this.y,this},a.prototype.normalize=a.prototype.normalize=function(){var a=this.len();return a>0&&(this.x=this.x/a,this.y=this.y/a),this},a.prototype.add=a.prototype.add=function(a){return this.x+=a.x,this.y+=a.y,this},a.prototype.sub=a.prototype.sub=function(a){return this.x-=a.x,this.y-=a.y,this},a.prototype.scale=a.prototype.scale=function(a,b){return this.x*=a,this.y*=b||a,this},a.prototype.project=a.prototype.project=function(a){var b=this.dot(a)/a.len2();return this.x=b*a.x,this.y=b*a.y,this},a.prototype.projectN=a.prototype.projectN=function(a){var b=this.dot(a);return this.x=b*a.x,this.y=b*a.y,this},a.prototype.reflect=a.prototype.reflect=function(a){var b=this.x,c=this.y;return this.project(a).scale(2),this.x-=b,this.y-=c,this},a.prototype.reflectN=a.prototype.reflectN=function(a){var b=this.x,c=this.y;return this.projectN(a).scale(2),this.x-=b,this.y-=c,this},a.prototype.dot=a.prototype.dot=function(a){return this.x*a.x+this.y*a.y},a.prototype.len2=a.prototype.len2=function(){return this.dot(this)},a.prototype.len=a.prototype.len=function(){return Math.sqrt(this.len2())},o.Circle=b,b.prototype.getAABB=b.prototype.getAABB=function(){var b=this.r,c=this.pos.clone().sub(new a(b,b));return new d(c,2*b,2*b).toPolygon()},o.Polygon=c,c.prototype.setPoints=c.prototype.setPoints=function(b){var c=!this.points||this.points.length!==b.length;if(c){var d,e=this.calcPoints=[],f=this.edges=[],g=this.normals=[];for(d=0;d<b.length;d++)e.push(new a),f.push(new a),g.push(new a)}return this.points=b,this._recalc(),this},c.prototype.setAngle=c.prototype.setAngle=function(a){return this.angle=a,this._recalc(),this},c.prototype.setOffset=c.prototype.setOffset=function(a){return this.offset=a,this._recalc(),this},c.prototype.rotate=c.prototype.rotate=function(a){for(var b=this.points,c=b.length,d=0;c>d;d++)b[d].rotate(a);return this._recalc(),this},c.prototype.translate=c.prototype.translate=function(a,b){for(var c=this.points,d=c.length,e=0;d>e;e++)c[e].x+=a,c[e].y+=b;return this._recalc(),this},c.prototype._recalc=function(){var a,b=this.calcPoints,c=this.edges,d=this.normals,e=this.points,f=this.offset,g=this.angle,h=e.length;for(a=0;h>a;a++){var i=b[a].copy(e[a]);i.x+=f.x,i.y+=f.y,0!==g&&i.rotate(g)}for(a=0;h>a;a++){var j=b[a],k=h-1>a?b[a+1]:b[0],l=c[a].copy(k).sub(j);d[a].copy(l).perp().normalize()}return this},c.prototype.getAABB=c.prototype.getAABB=function(){for(var b=this.calcPoints,c=b.length,e=b[0].x,f=b[0].y,g=b[0].x,h=b[0].y,i=1;c>i;i++){var j=b[i];j.x<e?e=j.x:j.x>g&&(g=j.x),j.y<f?f=j.y:j.y>h&&(h=j.y)}return new d(this.pos.clone().add(new a(e,f)),g-e,h-f).toPolygon()},o.Box=d,d.prototype.toPolygon=d.prototype.toPolygon=function(){var b=this.pos,d=this.w,e=this.h;return new c(new a(b.x,b.y),[new a,new a(d,0),new a(d,e),new a(0,e)])},o.Response=e,e.prototype.clear=e.prototype.clear=function(){return this.aInB=!0,this.bInA=!0,this.overlap=Number.MAX_VALUE,this};for(var p=[],q=0;10>q;q++)p.push(new a);for(var r=[],q=0;5>q;q++)r.push([]);var s=new e,t=new d(new a,1,1).toPolygon();o.isSeparatingAxis=g;var u=-1,v=0,w=1;return o.pointInCircle=i,o.pointInPolygon=j,o.testCircleCircle=k,o.testPolygonCircle=l,o.testCirclePolygon=m,o.testPolygonPolygon=n,o}),e("undefined"!=typeof slopes?slopes:window.slopes)}).call(a,void 0,void 0,void 0,void 0,function(a){b.exports=a})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],20:[function(a,b,c){(function(a){(function(a,b,c,d,e){var f=function(){var a=Date.now(),b=a,c=0,d=1/0,e=0,f=0,g=1/0,h=0,i=0,j=0,k=document.createElement("div");k.id="stats",k.addEventListener("mousedown",function(a){a.preventDefault(),s(++j%2)},!1),k.style.cssText="width:80px;opacity:0.9;cursor:pointer";var l=document.createElement("div");l.id="fps",l.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",k.appendChild(l);var m=document.createElement("div");m.id="fpsText",m.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",m.innerHTML="FPS",l.appendChild(m);var n=document.createElement("div");for(n.id="fpsGraph",n.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",l.appendChild(n);74>n.children.length;){var o=document.createElement("span");o.style.cssText="width:1px;height:30px;float:left;background-color:#113",n.appendChild(o)}var p=document.createElement("div");p.id="ms",p.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",k.appendChild(p);var q=document.createElement("div");q.id="msText",
q.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",q.innerHTML="MS",p.appendChild(q);var r=document.createElement("div");for(r.id="msGraph",r.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",p.appendChild(r);74>r.children.length;)o=document.createElement("span"),o.style.cssText="width:1px;height:30px;float:left;background-color:#131",r.appendChild(o);var s=function(a){switch(j=a){case 0:l.style.display="block",p.style.display="none";break;case 1:l.style.display="none",p.style.display="block"}};return{REVISION:11,domElement:k,setMode:s,begin:function(){a=Date.now()},end:function(){var j=Date.now();c=j-a,d=Math.min(d,c),e=Math.max(e,c),q.textContent=c+" MS ("+d+"-"+e+")";var k=Math.min(30,30-30*(c/200));return r.appendChild(r.firstChild).style.height=k+"px",i++,j>b+1e3&&(f=Math.round(1e3*i/(j-b)),g=Math.min(g,f),h=Math.max(h,f),m.textContent=f+" FPS ("+g+"-"+h+")",k=Math.min(30,30-30*(f/100)),n.appendChild(n.firstChild).style.height=k+"px",b=j,i=0),j},update:function(){a=this.end()}}};e("undefined"!=typeof f?f:window.Stats)}).call(a,void 0,void 0,void 0,void 0,function(a){b.exports=a})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],21:[function(a,b,c){b.exports={name:"earthbound-js",version:"0.0.1",description:"An Earthbound Demo in Javascipt",main:"build/js/app.min.js",scripts:{test:'echo "Error: no test specified" && exit 1'},author:"Cary Stanley",browser:{Stats:"./js/lib/stats.min.js",slopes:"./js/lib/phaser-arcade-slopes.min.js"},"browserify-shim":{Stats:{exports:"Stats"},slopes:{exports:"slopes"}},dependencies:{browserify:"^13.0.0","browserify-shim":"^3.8.12",grunt:"^0.4.5","grunt-browserify":"^5.0.0","grunt-cache-bust":"^1.1.1","grunt-contrib-clean":"^1.0.0","grunt-contrib-compress":"^1.1.1","grunt-contrib-connect":"^1.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-jade":"^1.0.0","grunt-contrib-jshint":"^1.0.0","grunt-contrib-stylus":"^1.2.0","grunt-contrib-uglify":"^1.0.0","grunt-contrib-watch":"^1.0.0","grunt-open":"^0.2.3",phaser:"^2.4.6"}}},{}]},{},[1]);