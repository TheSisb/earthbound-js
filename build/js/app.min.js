/*
 * Earthbound.js
 * An Earthbound Demo in Javascipt
 *
 * @author Cary Stanley
 * @version 0.0.1
 * @copyright Cary Stanley
 * @license  licensed
 *
 * Made using Phaser JS Boilerplate <https://github.com/lukewilde/phaser-js-boilerplate>
 */
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){b.exports={hero:{stats:{off:1,def:1,spd:1,guts:1,vit:1,iq:20,luck:1},equip:{weapon:null,arm:null,body:null,other:null},sprite:"hero",level:1}}},{}],2:[function(a,b,c){b.exports={mushroom:{stats:{hp:10,def:5,off:3,guts:10,luck:30,miss:20},xp:6,money:6,level:2,music:"silly",strategy:"random",actions:["bash","heal","bash","mushroom"],drop:"fungi",dropfreq:2,status:"normal"}}},{}],3:[function(a,b,c){b.exports={someevent:{pages:[{trigger:"action",type:"fixed",sprite:"somespriteid",conditions:{},commands:[]}]}}},{}],4:[function(a,b,c){b.exports={crackedbat:{type:"weapon",cost:18,stats:{off:4}},ramen:{type:"food",cost:12,stats:{hp:30}}}},{}],5:[function(a,b,c){b.exports={CHARACTER_NAME_hero:"Izumi",ITEM_NAME_ramen:"Ramen",ENEMY_NAME_mushroom:"Mushroom"}},{}],6:[function(a,b,c){b.exports={map_house:{type:"map",path:"maps/house.json",tileset:["tiles_house"],bgm:"bgm_boymeetsgirl"},tiles_house:{type:"image",path:"images/house_tileset.png"},image_dialog:{type:"image",path:"images/dialog.png"},battlebg_1:{type:"image",path:"images/battlebg/1.png"},font_basic:{type:"bitmapfont",path:"fonts/basic.png",meta:"fonts/basic.xml"},font_mrsaturn:{type:"bitmapfont",path:"fonts/mrsaturn.png",meta:"fonts/mrsaturn.xml"},sfx_door_open:{type:"audio",path:["audio/effect_door_open.wav"]},bgm_boymeetsgirl:{type:"audio",path:["audio/background_boymeetsgirl.mp3"]},"default":{type:"resources",resources:["image_dialog","font_basic","sfx_door_open","battlebg_1"]}}},{}],7:[function(a,b,c){b.exports={worldmenu:{type:"menu",x:8,y:8,width:64,height:64,rows:3},worldgoodsmenu:{type:"menu",x:32,y:32,width:152,height:64,rows:3},matte:{type:"matte"},"new":{type:"frame",x:8,y:8,width:64,height:64},battlebg:{type:"battlebg"}}},{}],8:[function(a,b,c){var d=a("./properties"),e={boot:a("./states/boot.js"),preloader:a("./states/preloader.js"),game:a("./states/game.js")},f=new Phaser.Game(d.size.x,d.size.y,Phaser.AUTO,"game",null,(!1),(!1)),g=a("./utils/Config");g.load({resources:a("../config/resources.json"),characters:a("../config/characters.json"),enemies:a("../config/enemies.json"),events:a("../config/events.json"),items:a("../config/items.json"),lang:a("../config/lang.json"),ui:a("../config/ui.json")}),Object.keys(e).forEach(function(a){var b=e[a];f.state.add(a,b)}),f.state.start("boot")},{"../config/characters.json":1,"../config/enemies.json":2,"../config/events.json":3,"../config/items.json":4,"../config/lang.json":5,"../config/resources.json":6,"../config/ui.json":7,"./properties":19,"./states/boot.js":20,"./states/game.js":21,"./states/preloader.js":22,"./utils/Config":36}],9:[function(a,b,c){function d(a,b,c,d,e){var f=8*d;Phaser.Sprite.call(this,a,b,c,"actors",f+4),this.animations.add("up",[f+0,f+1],5,!0),this.animations.add("right",[f+2,f+3],10,!0),this.animations.add("down",[f+4,f+5],5,!0),this.animations.add("left",[f+6,f+7],10,!0),this.anchor.setTo(.5,1),e&&(a.physics.arcade.enable(this),this.body.setSize(14,7,5,27),a.slopes.enable(this))}d.prototype=Object.create(Phaser.Sprite.prototype),d.prototype.constructor=d,b.exports=d},{}],10:[function(a,b,c){function d(a,b,c,d){e.call(this,a,c,d,7,!0),this.timer=0,this.accel=80,this.visLife=60,this.velX=0,this.velY=0}var e=a("./Character");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.update=function(){if(this.inCamera)this.visLife=60;else if(this.visLife--,this.visLife<0)return void this.kill();if(this.game.state.getCurrentState().playerDisabled)return this.body.velocity.x=0,this.body.velocity.y=0,void this.animations.stop();this.timer--,this.timer<=0&&(this.velX=Math.floor(2*Math.random()-1)*this.accel,this.velY=Math.floor(2*Math.random()-1)*this.accel,this.timer=60),this.body.velocity.x=this.velX,this.body.velocity.y=this.velY;var a=null;this.body.velocity.x<this.body.velocity.y&&this.body.velocity.x<0?a="left":this.body.velocity.x>this.body.velocity.y&&this.body.velocity.x>0&&(a="right"),this.body.velocity.y<this.body.velocity.x&&this.body.velocity.y<0?a="up":this.body.velocity.y>this.body.velocity.x&&this.body.velocity.y>0&&(a="down"),a?this.play(a):this.animations.stop()},d.prototype.onTouch=function(){this.game.state.getCurrentState().switchSubState("battle"),this.kill()},b.exports=d},{"./Character":9}],11:[function(a,b,c){function d(a,b,c){e.call(this,a,c.x,c.y,b,!1),this.initQueue(c,16)}var e=a("./Character");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.initQueue=function(a,b){this.followCharacter=a,this.followQueue=[],this.leaderCursor=0,this.followerCursor=1,this.followMax=b;for(var c=0;c<b;c++)this.followQueue[c]={animation:"down",x:a.x,y:a.y}},d.prototype.updateQueue=function(){this.leaderCursor=(this.leaderCursor+1)%this.followMax,this.followerCursor=(this.followerCursor+1)%this.followMax,this.followQueue[this.leaderCursor].animation=this.followCharacter.animations.currentAnim.name,this.followQueue[this.leaderCursor].x=this.followCharacter.x,this.followQueue[this.leaderCursor].y=this.followCharacter.y;var a=this.followQueue[this.followerCursor];this.x=a.x,this.y=a.y,this.play(a.animation)},d.prototype.update=function(){return this.game.state.getCurrentState().playerDisabled?void this.animations.stop():void(this.followCharacter.animations.currentAnim.isPlaying?this.updateQueue():this.animations.stop())},b.exports=d},{"./Character":9}],12:[function(a,b,c){function d(a,b,c,d,f){e.call(this,a,c,d,f,!0),this.map=b,this.accel=80}var e=a("./Character");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.update=function(){if(this.body.velocity.x=0,this.body.velocity.y=0,this.game.state.getCurrentState().playerDisabled)return void this.animations.stop();var a=null,b=this.game.state.getCurrentState().cursors;b.left.isDown?(this.body.velocity.x=-this.accel,a="left"):b.right.isDown&&(this.body.velocity.x=this.accel,a="right"),b.up.isDown?(this.body.velocity.y=-this.accel,a="up"):b.down.isDown&&(this.body.velocity.y=this.accel,a="down"),a?this.play(a):this.animations.stop()},b.exports=d},{"./Character":9}],13:[function(a,b,c){function d(a,b,c,d){Phaser.Group.call(this,a),this.player=new f(a,b,c,d,0);var g=new e(a,1,this.player),h=new e(a,2,g);this.add(this.player),this.add(g),this.add(h)}var e=a("./Follower"),f=a("./Player");d.prototype=Object.create(Phaser.Group.prototype),d.prototype.constructor=d,d.prototype.reset=function(a,b){this.player.reset(a,b)},d.prototype.getLeader=function(){return this.player},b.exports=d},{"./Follower":11,"./Player":12}],14:[function(a,b,c){function d(a,b){e.call(this,a,b)}var e=a("./Event");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.onTouch=function(){var a=this.settings.properties;this.game.showDialog(a.text)},b.exports=d},{"./Event":15}],15:[function(a,b,c){function d(a,b){this.game=a,this.settings=b,Phaser.Sprite.call(this,a,b.x||0,b.y||0),this.renderable=!1,this.width=b.width||16,this.height=b.height||16,a.physics.arcade.enable(this),this.body.immovable=!0}d.prototype=Object.create(Phaser.Sprite.prototype),d.prototype.constructor=d,d.prototype.onTouch=function(){},b.exports=d},{}],16:[function(a,b,c){function d(a,b){e.call(this,a,b),this.flagIsVisible=!1}var e=a("./Event");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.update=function(){this.inCamera&&!this.flagIsVisible?(this.flagIsVisible=!0,this.onVisible()):!this.inCamera&&this.flagIsVisible&&(this.flagIsVisible=!1)},d.prototype.onVisible=function(){this.game.spawnEnemy(this.settings.type,this.body.x+this.body.width/2,this.body.y+this.body.height/2)},b.exports=d},{"./Event":15}],17:[function(a,b,c){function d(a,b){e.call(this,a,b)}var e=a("./Event");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.onTouch=function(){var a=this.settings.properties;this.game.transport(a.map,a.location)},b.exports=d},{"./Event":15}],18:[function(a,b,c){function d(a,b){this.game=a,this.id=b.id,this.map=a.add.tilemap(b.id),b.tileset.forEach(function(a){this.map.addTilesetImage(a,a)},this),a.world.setBounds(0,0,this.map.widthInPixels,this.map.heightInPixels),this.backgroundLayer=this.map.createLayer("background"),this.foregroundLayer=this.map.createLayer("foreground"),this.locations=this.setupLocations(this.map),this.events=this.setupEvents(this.game,this.map),this.spawns=this.setupSpawns(this.game,this.map);for(var c={291:null,158:"HALF_TOP_RIGHT",159:"HALF_TOP_LEFT",97:null,80:"HALF_TOP_RIGHT",81:"HALF_TOP_LEFT",82:"HALF_TOP_LEFT"},d=[],e=0;e<=291;e++)d.push(null!==c[e]?c[e]||"FULL":void 0);this.game.game.slopes.convertTilemapLayer(this.backgroundLayer,d)}var e={transport:a("../events/TransportEvent"),dialog:a("../events/DialogEvent")},f=a("../events/Spawn");d.prototype.getEvents=function(){return this.events},d.prototype.setupSpawns=function(a,b){var c=[];return b.objects.Spawns.forEach(function(b){c.push(new f(a,b))}),c},d.prototype.setupEvents=function(a,b){var c=[];return b.objects.Events.forEach(function(b){c.push(new e[b.type](a,b))}),c},d.prototype.setupLocations=function(a){var b={};return a.objects.Locations.forEach(function(a){b[a.name]={x:a.x+a.width/2,y:a.y+a.height/2}}),b},d.prototype.getLocation=function(a){return this.locations[a]},b.exports=d},{"../events/DialogEvent":14,"../events/Spawn":16,"../events/TransportEvent":17}],19:[function(a,b,c){var d=a("../package.json");b.exports={title:"Earthbound.js",description:d.description,port:3017,liveReloadPort:3018,mute:!1,showStats:!0,size:{x:256,y:224},analyticsId:"UA-5075951-7"}},{"../package.json":39}],20:[function(a,b,c){function d(a){var b=new Stats;b.setMode(0),b.domElement.style.position="absolute",b.domElement.style.right="0px",b.domElement.style.top="0px",document.body.appendChild(b.domElement);var c=a.update;a.update=function(){b.begin(),c.apply(a,arguments),b.end()}}var e=a("../properties"),f={};f.create=function(){e.showStats&&d(this.game),this.game.sound.mute=e.mute,this.game.state.start("preloader")},b.exports=f},{"../properties":19}],21:[function(a,b,c){var d=a("../utils/Config"),e=a("../utils/Loader"),f=a("../utils/SubState"),g=a("../entities/PlayerGroup"),h=a("../entities/Enemy"),i=a("../map/Map"),j={world:a("../substates/World"),transition:a("../substates/Transition"),dialog:a("../substates/Dialog"),battle:a("../substates/Battle"),worldmenu:a("../substates/WorldMenu"),worldgoodsmenu:a("../substates/WorldGoodsMenu")},k=a("../ui/DialogComponent"),l=a("../ui"),m={};m.substate=new f(m,j),m.init=function(a,b){this.mapId=a,this.startLocationId=b},m.preload=function(){e.loadResource(m.game,"default"),e.loadResource(m.game,this.mapId),m.load.spritesheet("actors","images/actors.png",24,32)},m.create=function(){this.mapConfig=d.getResource(this.mapId),this.physics.startSystem(Phaser.Physics.ARCADE),this.game.plugins.add(Phaser.Plugin.ArcadeSlopes),m.physics.arcade.gravity.y=0,this.mapConfig.bgm&&(this.backgroundMusic=m.add.audio(this.mapConfig.bgm),this.backgroundMusic.play("",0,1,!0)),this.soundEffects={sfx_door_open:m.add.audio("sfx_door_open")},this.currentMap=new i(m,this.mapConfig),this.enemies=m.add.group(),this.spawns=m.add.group(),this.currentMap.spawns.forEach(function(a){this.spawns.add(a)},this);var a=this.currentMap.getLocation(this.startLocationId);this.player=new g(m.game,this.currentMap,a.x,a.y),this.chatDialog=new k(m.game),this.setupUI(),this.switchSubState("world"),this.cursors=m.input.keyboard.createCursorKeys(),this.actionKey=m.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),this.cancelKey=m.input.keyboard.addKey(Phaser.Keyboard.X),this.game.input.keyboard.addKeyCapture([Phaser.Keyboard.SPACEBAR,Phaser.Keyboard.X]),this.fadeIn()},m.setupUI=function(){var a=d.getConfig("ui"),b={};Object.keys(a).forEach(function(c){var d=a[c];b[c]=new l[d.type](m.game,d)}),this.ui=b},m.update=function(){this.substate.update()},m.switchSubState=function(a){this.substate["switch"](a)},m.fadeIn=function(a){this.ui.matte.transition(0,0,500,a)},m.fadeOut=function(a){this.ui.matte.transition(0,1,500,a)},m.encounterIn=function(a){this.ui.matte.transition(16711680,.5,500,a)},m.encounterOut=function(a){this.ui.matte.transition(16711680,0,10,a)},m.hideWorld=function(){this.player.visible=!1,this.enemies.visible=!1,this.currentMap.backgroundLayer.visible=!1,this.currentMap.foregroundLayer.visible=!1,this.ui.matte.matte.visible=!1},m.showWorld=function(){this.player.visible=!0,this.enemies.visible=!0,this.currentMap.backgroundLayer.visible=!0,this.currentMap.foregroundLayer.visible=!0,this.ui.matte.matte.visible=!0},m.hideBattle=function(){this.ui.battlebg.hide()},m.showBattle=function(){this.ui.battlebg.show()},m.soundEffectPlay=function(a){this.soundEffects[a].play()},m.transport=function(a,b){var c=this;this.switchSubState("transition"),this.soundEffectPlay("sfx_door_open"),this.fadeOut(function(){if(c.mapId===a){var d=c.currentMap.getLocation(b);c.player.reset(d.x,d.y),c.fadeIn(function(){c.switchSubState("world")})}else c.backgroundMusic.stop(),c.state.start("game",!0,!1,a,b)})},m.showDialog=function(a){this.chatDialog.setText(a),this.switchSubState("dialog")},m.mapTint=function(a){this.currentMap.foregroundLayer.tint=a,this.currentMap.backgroundLayer.tint=a},m.spawnEnemy=function(a,b,c){this.enemies.add(new h(this.game,a,b,c))},b.exports=m},{"../entities/Enemy":10,"../entities/PlayerGroup":13,"../map/Map":18,"../substates/Battle":23,"../substates/Dialog":24,"../substates/Transition":26,"../substates/World":27,"../substates/WorldGoodsMenu":28,"../substates/WorldMenu":29,"../ui":35,"../ui/DialogComponent":31,"../utils/Config":36,"../utils/Loader":37,"../utils/SubState":38}],22:[function(a,b,c){var d={};d.preload=function(){},d.create=function(){this.game.state.start("game",!0,!1,"map_house","start")},b.exports=d},{}],23:[function(a,b,c){var d=function(a){this.parent=a};d.prototype.transitionIn=function(a){var b=this.parent;b.encounterIn(function(){b.hideWorld(),b.showBattle(),a()})},d.prototype.update=function(){var a=this.parent;a.actionKey.isDown&&a.switchSubState("world")},d.prototype.transitionOut=function(a){var b=this.parent;b.showWorld(),b.hideBattle(),b.encounterOut(a)},b.exports=d},{}],24:[function(a,b,c){var d=function(a){this.parent=a};d.prototype.enter=function(){this.parent.chatDialog.show()},d.prototype.update=function(){var a=this.parent;a.actionKey.isDown&&a.switchSubState("world")},d.prototype.exit=function(){this.parent.chatDialog.hide()},b.exports=d},{}],25:[function(a,b,c){var d=function(a){this.parent=a};d.prototype.enter=function(){var a=this.parent;this.menu=a.ui[this.menuId],this.menu.setOptions(this.getOptions()),this.menu.show(),this.setCoolOff()},d.prototype.update=function(){var a=this.parent;this.coolOff<=0?a.cancelKey.isDown?this.onCancel&&this.onCancel():a.actionKey.isDown?this.onSelect&&this.onSelect(this.menu.getSelectedId()):a.cursors.up.isDown?(this.menu.selectionUp(),this.setCoolOff()):a.cursors.down.isDown&&(this.menu.selectionDown(),this.setCoolOff()):this.coolOff--},d.prototype.setCoolOff=function(){this.coolOff=10},b.exports=d},{}],26:[function(a,b,c){var d=function(a){this.parent=a};d.prototype.enter=function(){},b.exports=d},{}],27:[function(a,b,c){var d=function(a){this.parent=a};d.prototype.enter=function(){var a=this.parent;a.playerDisabled=!1,a.game.camera.follow(a.player.getLeader(),Phaser.Camera.FOLLOW_TOPDOWN),this.actionCoolOff=20},d.prototype.update=function(){var a=this.parent;if(this.actionCoolOff>0?this.actionCoolOff--:a.cancelKey.isDown&&a.switchSubState("worldmenu"),a.enemies.sort("y",Phaser.Group.SORT_ASCENDING),a.player.sort("y",Phaser.Group.SORT_ASCENDING),a.physics.arcade.collide(a.enemies,a.currentMap.backgroundLayer),!a.playerDisabled){var b=a.currentMap.getEvents();a.physics.arcade.collide(a.player,a.currentMap.backgroundLayer),a.physics.arcade.collide(a.player,a.enemies,function(a,b){b.onTouch()}),a.physics.arcade.collide(a.player.getLeader(),b,function(a,b){b.onTouch()})}},d.prototype.exit=function(){this.parent.playerDisabled=!0},b.exports=d},{}],28:[function(a,b,c){var d=a("./Menu"),e=function(a){d.call(this,a)};e.prototype=Object.create(d.prototype),e.prototype.constructor=e,e.prototype.menuId="worldgoodsmenu",e.prototype.getOptions=function(){return[{id:"sneaker",text:"Old Sneaker"},{id:"stungun",text:"Stun Gun"},{id:"sock",text:"Sock"}]},e.prototype.onCancel=function(){this.menu.hide(),this.parent.switchSubState("worldmenu")},e.prototype.onSelect=function(a){},b.exports=e},{"./Menu":25}],29:[function(a,b,c){var d=a("./Menu"),e=function(a){d.call(this,a)};e.prototype=Object.create(d.prototype),e.prototype.constructor=e,e.prototype.menuId="worldmenu",e.prototype.getOptions=function(){return[{id:"goods",text:"Goods"},{id:"equip",text:"Equip"},{id:"status",text:"Status"}]},e.prototype.onCancel=function(){this.menu.hide(),this.parent.switchSubState("world")},e.prototype.onSelect=function(a){switch(a){case"goods":this.parent.switchSubState("worldgoodsmenu")}},b.exports=e},{"./Menu":25}],30:[function(a,b,c){function d(a,b,c,d,e){Phaser.Sprite.call(this,a,0,b,e),this.lineWidth=c,this.lineHeight=d,this.t=0}function e(a,b){var c=a.width,e=a.height,f=a.add.group(),g=2;f.fixedToCamera=!0;for(var h=0;h<e;h+=2)f.add(new d(a,h,c,g,"battlebg_1"));f.visible=!1,this.background=f}d.prototype=Object.create(Phaser.Sprite.prototype),d.prototype.constructor=d,d.prototype.update=function(){var a=this.t++,b=this.y,c=this.lineWidth,d=this.lineHeight,e=30,f=.03,g=.04,h=e*Math.sin(f*b+g*a);this.crop(new Phaser.Rectangle(Math.floor((h+c)%c),b%64,c,d)),this.updateCrop()},e.prototype.show=function(){this.background.visible=!0},e.prototype.hide=function(){this.background.visible=!1},b.exports=e},{}],31:[function(a,b,c){function d(a){a.cache.addNinePatch("ninepatch_dialog","image_dialog",null,8,8,16,16),this.container=new Phaser.NinePatchImage(a,96,8,"ninepatch_dialog"),this.container.targetWidth=152,this.container.targetHeight=64,this.container.fixedToCamera=!0,this.chatTxt=[],this.lineCount=3;for(var b=0;b<this.lineCount;b++){var c=a.make.bitmapText(8,8+16*b,"font_basic","",16,this.container);c.maxWidth=128,this.container.addChild(c),this.chatTxt.push(c)}this.container.visible=!1,this.clear(),a.time.events.loop(25,this.update,this)}d.prototype.update=function(){if(this.buffer.length>0){if(this.currentLine>=this.lineCount){this.currentLine--;for(var a=0;a<this.lineCount-1;a++)this.chatTxt[a].setText(this.chatTxt[a+1].text);this.chatTxt[this.currentLine].setText("")}if(this.buffer[0].length>0){var b=this.buffer[0].substr(0,1);this.buffer[0]=this.buffer[0].substr(1),this.chatTxt[this.currentLine].setText(this.chatTxt[this.currentLine].text+b)}else this.buffer.shift(),this.currentLine++}},d.prototype.setText=function(a){var b;do b=this.chatTxt[0].scanLine(this.chatTxt[0]._data.font,1,a),this.buffer.push(b.text),a=a.substr(b.text.length+1);while(b.end===!1)},d.prototype.show=function(){this.container.visible=!0},d.prototype.hide=function(){this.container.visible=!1,this.clear()},d.prototype.clear=function(){this.buffer=[],this.currentLine=0;for(var a=0;a<this.lineCount;a++)this.chatTxt[a].setText("")},b.exports=d},{}],32:[function(a,b,c){function d(a,b){a.cache.addNinePatch("ninepatch_dialog","image_dialog",null,8,8,16,16);var c=new Phaser.NinePatchImage(a,b.x,b.y,"ninepatch_dialog");c.targetWidth=b.width,c.targetHeight=b.height,c.fixedToCamera=!0,c.visible=!1,this.frame=c}d.prototype.show=function(){this.frame.visible=!0},d.prototype.hide=function(){this.frame.visible=!1},b.exports=d},{}],33:[function(a,b,c){function d(a){var b=a.add.graphics(0,0);b.fixedToCamera=!0,b.alpha=1,this.matte=b,this.game=a}d.prototype.transition=function(a,b,c,d){d=d||function(){};var e=this.game,f=this.matte;f.clear(),f.beginFill(a,1),f.drawRect(0,0,e.width,e.height),f.endFill();var g=this.game.add.tween(this.matte);g.to({alpha:b},c,null),g.onComplete.add(d),g.start()},b.exports=d},{}],34:[function(a,b,c){function d(a,b){a.cache.addNinePatch("ninepatch_dialog","image_dialog",null,8,8,16,16),this.container=new Phaser.NinePatchImage(a,b.x,b.y,"ninepatch_dialog"),this.container.targetWidth=b.width,this.container.targetHeight=b.height,this.container.fixedToCamera=!0,this.menuItems=[],this.menuItemCount=b.rows,this.options=[],this.selection=0;for(var c=0;c<this.menuItemCount;c++){var d=a.make.bitmapText(8,8+16*c,"font_basic","",16,this.container);d.maxWidth=b.width-24,this.container.addChild(d),this.menuItems.push(d)}this.container.visible=!1,this.setOptions()}d.prototype.setOptions=function(a){this.options=a||[],this.selection=0,this.reset()},d.prototype.reset=function(){for(var a=this.options,b=0;b<this.menuItemCount;b++){var c=a[b];this.menuItems[b].setText((this.selection===b?"@ ":"")+(c&&c.text||""))}},d.prototype.selectionUp=function(){this.selection--,this.selection<0&&(this.selection=0),this.reset()},d.prototype.selectionDown=function(){this.selection++,this.selection>=this.menuItemCount&&(this.selection=this.menuItemCount-1),this.reset()},d.prototype.getSelectedId=function(){return this.options&&this.options[this.selection]&&this.options[this.selection].id},d.prototype.show=function(){this.container.visible=!0},d.prototype.hide=function(){this.container.visible=!1},b.exports=d},{}],35:[function(a,b,c){b.exports={menu:a("./Menu"),matte:a("./Matte"),frame:a("./Frame"),battlebg:a("./BattleBackground")}},{"./BattleBackground":30,"./Frame":32,"./Matte":33,"./Menu":34}],36:[function(a,b,c){var d={};d.load=function(a){this.config=a},d.getResource=function(a){var b=this.config.resources[a];if(!b)throw"Invalid Resouce ID - "+a;return b.id=a,b},d.getConfig=function(a){return this.config[a]},b.exports=d},{}],37:[function(a,b,c){var d=a("./Config"),e={};e.loadResource=function(a,b){var c=this,e=d.getResource(b);switch(e.type){case"image":if(a.cache.checkImageKey(e.id))return;a.load.image(e.id,e.path);break;case"sprite":break;case"map":if(a.cache.checkTilemapKey(e.id))return;a.load.tilemap(e.id,e.path,null,Phaser.Tilemap.TILED_JSON),e.tileset&&e.tileset.forEach(function(b){c.loadResource(a,b)}),e.bgm&&c.loadResource(a,e.bgm);break;case"resources":e.resources&&e.resources.forEach(function(b){c.loadResource(a,b)});break;case"audio":if(a.cache.checkSoundKey(e.id))return;a.load.audio(e.id,e.path);break;case"bitmapfont":if(a.cache.checkBitmapFontKey(e.id))return;a.load.bitmapFont(e.id,e.path,e.meta)}},b.exports=e},{"./Config":36}],38:[function(a,b,c){function d(a,b){this.parentState=a,this.substates=b,this.currentState=null}var e=function(a){return a()};d.prototype["switch"]=function(a){var b=this,c=b.currentState&&b.currentState.transitionOut?b.currentState.transitionOut.bind(b.currentState):e;c(function(){b.currentState&&b.currentState.exit&&b.currentState.exit(),b.currentState=null;var c=b.substates[a],d=new c(b.parentState),f=d&&d.transitionIn?d.transitionIn.bind(d):e;f(function(){b.currentState=d,b.currentState&&b.currentState.enter&&b.currentState.enter()})})},d.prototype.update=function(){this.currentState&&this.currentState.update&&this.currentState.update()},b.exports=d},{}],39:[function(a,b,c){b.exports={name:"earthbound-js",version:"0.0.1",description:"An Earthbound Demo in Javascipt",main:"build/js/app.min.js",scripts:{lint:"eslint --quiet --cache . --ext .js",test:'echo "Error: no test specified" && exit 1'},author:"Cary Stanley",browser:{Stats:"./js/lib/stats.min.js",slopes:"./js/lib/phaser-arcade-slopes.min.js",ninepatch:"./js/lib/nine-patch-phaser-plugin.min.js"},devDependencies:{browserify:"^13.0.0","browserify-shim":"^3.8.12",eslint:"^3.0.0",grunt:"^0.4.5","grunt-browserify":"^5.0.0","grunt-cache-bust":"^1.1.1","grunt-contrib-clean":"^1.0.0","grunt-contrib-compress":"^1.1.1","grunt-contrib-connect":"^1.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-jade":"^1.0.0","grunt-contrib-jshint":"^1.0.0","grunt-contrib-stylus":"^1.2.0","grunt-contrib-uglify":"^1.0.0","grunt-contrib-watch":"^1.0.0","grunt-open":"^0.2.3",phaser:"2.4.8","pre-commit":"^1.1.0"},eslintConfig:{es6:!0},"pre-commit":["lint"]}},{}]},{},[8]);